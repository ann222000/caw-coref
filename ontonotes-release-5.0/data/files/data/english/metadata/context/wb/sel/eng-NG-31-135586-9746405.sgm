<DOC>
<DOCID> eng-NG-31-135586-9746405 </DOCID>
<DOCTYPE SOURCE="usenet"> USENET TEXT </DOCTYPE>
<DATETIME> 2007-12-10T11:06:00 </DATETIME>
<BODY>
<HEADLINE>
how to use stream_filter_append, for zlib?
</HEADLINE>
<TEXT>
<POST>
<POSTER> &quot;Bint&quot; &lt;b...@csgs.com&gt; </POSTER>
<POSTDATE> 2007-12-10T11:06:00 </POSTDATE>
Hello,

I am trying to decompress some data in a file, from PHP.  It's data that
has been zlib-compressed on a handheld device and sent wirelessly to the PHP
server.

I can open the file and read some regular data from it.  When I get to the
position where my zlib compressed information starts, I make these calls:

$zlib_filter = stream_filter_append($cellfile, 'zlib.inflate',
STREAM_FILTER_READ, 1);
$data = fread($cellfile, $thumblength);
stream_filter_remove($zlib_filter);

Is that the right way to do it?  I am getting this error:

stream_filter_append() [&lt;a
href='function.stream-filter-append'&gt;function.stream-filter-append&lt;/a&gt;]:
Filter failed to process pre-buffered data.  Not adding to filterchain.

I put 1 for the compression level, because originally I only compress with
one pass of the zlib.compress function.  I hope that it is possible to use
this zlib decompression from some point within a regular file. I do not want
to go the route of compressing my entire file with gzip.  I appreciate any
tips on what I might be doing wrong.

Thanks,
B
</POST>
</TEXT>
</BODY>
</DOC>
