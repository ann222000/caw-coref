<DOC>
<DOCID> eng-NG-31-135594-8598460 </DOCID>
<DOCTYPE SOURCE="usenet"> USENET TEXT </DOCTYPE>
<DATETIME> 2007-08-05T04:41:00 </DATETIME>
<BODY>
<HEADLINE>
Java Seems to Have &quot;Just Broken&quot;
</HEADLINE>
<TEXT>
<POST>
<POSTER> Hal Vaughan &lt;h...@thresholddigital.com&gt; </POSTER>
<POSTDATE> 2007-08-05T04:41:00 </POSTDATE>
I've been working on a program in Eclipse, which is using a 1.4.2 JDK (I
don't know why, I'm guessing that's how it was set up) on Linux (Ubuntu
Feisty Fawn).  The main Java package for now is Java 5.  I've been testing
my program today from the console, instead of through Eclipse (which is why
I don't see this as an Eclipse issue).  I have not been editing any of the
classes with a main() function in them. Earlier I was able to run my
program just fine with &quot;java -cp myclasspath myprogram.&quot;  After a number of
hours of editing only one class, I used the same command line I had used
earlier (actually it's a bash script) and now I get an error (pasted in at
the end of this post) and no matter what Java class I try to run with my
default JRE, I get the same error.  I take it this means Java is shot, but
it would help to know why or what is going on.  Any ideas?  I figure I have
to reinstall Java to fix this, but if there's other ways to do it, I'm open
to them.

I'm not finding much on Google that actually gives me anything useful.

Thanks!

Hal
-------------------Error stacktrace-------------------
Exception in thread &quot;main&quot; java.lang.ClassFormatError: Unknown constant tag
33 in class file java/io/FilePermission
at sun.net. www.protocol.file.FileURLConnection .
getPermission(FileURLConnection.java:198)
at java.net.URLClassLoader.getPermissions(URLClassLoader.java:452)
at sun.misc.Launcher$AppClassLoader.
getPermissions(Launcher.java:284)
at java.security.SecureClassLoader.
getProtectionDomain(SecureClassLoader.java:192)
at java.security.SecureClassLoader.
defineClass(SecureClassLoader.java:124)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)
at java.net.URLClassLoader.access$000(URLClassLoader.java:56)
at java.net.URLClassLoader$1.run(URLClassLoader.java:195)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:276)
at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:319)
</POST>
<POST>
<POSTER> &quot;Larry Barowski&quot; &lt;MElarrybar-AT-eng_DOT_auburnANOTHERDOTeduEND&gt; </POSTER>
<POSTDATE> 2007-08-05T09:56:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
&quot;Hal Vaughan&quot; &lt;h ... @thresholddigital.com&gt; wrote in message
">

news:EI6dnfGg7KOkECjbnZ2dnUVZ_oesnZ2d@comcast.com ...

<QUOTE PREVIOUSPOST="
&gt; I've been working on a program in Eclipse, which is using a 1.4.2 JDK (I
&gt; don't know why, I'm guessing that's how it was set up) on Linux (Ubuntu
&gt; Feisty Fawn).  The main Java package for now is Java 5.  I've been testing
&gt; my program today from the console, instead of through Eclipse (which is
&gt; why
&gt; I don't see this as an Eclipse issue).  I have not been editing any of the
&gt; classes with a main() function in them. Earlier I was able to run my
&gt; program just fine with &quot;java -cp myclasspath myprogram.&quot;  After a number
&gt; of
&gt; hours of editing only one class, I used the same command line I had used
&gt; earlier (actually it's a bash script) and now I get an error (pasted in at
&gt; the end of this post) and no matter what Java class I try to run with my
&gt; default JRE, I get the same error.  I take it this means Java is shot, but
&gt; it would help to know why or what is going on.  Any ideas?  I figure I
&gt; have
&gt; to reinstall Java to fix this, but if there's other ways to do it, I'm
&gt; open
&gt; to them.
&gt; ...
&gt; -------------------Error stacktrace-------------------
&gt; Exception in thread &quot;main&quot; java.lang.ClassFormatError: Unknown constant
&gt; tag
&gt;                33 in class file java/io/FilePermission
&gt;        ...
">

Most likely you just had a disk error. Perhaps it was already
corrupted, but your program was not using FilePermission
(indirectly) until you made some changes.
</POST>
<POST>
<POSTER> Roedy Green &lt;see_webs...@mindprod.com.invalid&gt; </POSTER>
<POSTDATE> 2007-08-05T10:29:00 </POSTDATE>
On Sun, 05 Aug 2007 04:41:28 -0400, Hal Vaughan
&lt;h ... @thresholddigital.com&gt; wrote, quoted or indirectly quoted someone
who said :

<QUOTE PREVIOUSPOST="
&gt;I've been testing
&gt;my program today from the console, instead of through Eclipse (which is why
&gt;I don't see this as an Eclipse issue).
">

So often a CLEAN compile (where you delete  all class files) clears up
such strange behaviour. It is often a changed static final not getting
propagated. It is the first thing to try. It takes no brain power, and
clears the decks for analysis of more serious problems.
--
Roedy Green Canadian Mind Products
The Java Glossary
http://mindprod.com
</POST>
<POST>
<POSTER> Hal Vaughan &lt;h...@thresholddigital.com&gt; </POSTER>
<POSTDATE> 2007-08-05T14:43:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
&quot;Larry Barowski&quot; &lt;MElarrybar-AT-eng_DOT_auburnANOTHERDOTeduEND&gt; wrote:

&gt; &quot;Hal Vaughan&quot; &lt;h ... @thresholddigital.com&gt; wrote in message
&gt; news:EI6dnfGg7KOkECjbnZ2dnUVZ_oesnZ2d@comcast.com ...
&gt;&gt; I've been working on a program in Eclipse, which is using a 1.4.2 JDK (I
&gt;&gt; don't know why, I'm guessing that's how it was set up) on Linux (Ubuntu
&gt;&gt; Feisty Fawn).  The main Java package for now is Java 5.  I've been
&gt;&gt; testing my program today from the console, instead of through Eclipse
&gt;&gt; (which is why
&gt;&gt; I don't see this as an Eclipse issue).  I have not been editing any of
&gt;&gt; the classes with a main() function in them. Earlier I was able to run my
&gt;&gt; program just fine with &quot;java -cp myclasspath myprogram.&quot;  After a number
&gt;&gt; of
&gt;&gt; hours of editing only one class, I used the same command line I had used
&gt;&gt; earlier (actually it's a bash script) and now I get an error (pasted in
&gt;&gt; at the end of this post) and no matter what Java class I try to run with
&gt;&gt; my
&gt;&gt; default JRE, I get the same error.  I take it this means Java is shot,
&gt;&gt; but
&gt;&gt; it would help to know why or what is going on.  Any ideas?  I figure I
&gt;&gt; have
&gt;&gt; to reinstall Java to fix this, but if there's other ways to do it, I'm
&gt;&gt; open
&gt;&gt; to them.
&gt;&gt; ...
&gt;&gt; -------------------Error stacktrace-------------------
&gt;&gt; Exception in thread &quot;main&quot; java.lang.ClassFormatError: Unknown constant
&gt;&gt; tag
&gt;&gt;                33 in class file java/io/FilePermission
&gt;&gt;        ...

&gt; Most likely you just had a disk error. Perhaps it was already
&gt; corrupted, but your program was not using FilePermission
&gt; (indirectly) until you made some changes.
">

Do you mean disk error in the JRE or in my program?  From what I see in the
stacktrace, Java never even got to the point of loading any of my classes.

Hal
</POST>
<POST>
<POSTER> Hal Vaughan &lt;h...@thresholddigital.com&gt; </POSTER>
<POSTDATE> 2007-08-05T14:45:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
Roedy Green wrote:
&gt; On Sun, 05 Aug 2007 04:41:28 -0400, Hal Vaughan
&gt; &lt;h ... @thresholddigital.com&gt; wrote, quoted or indirectly quoted someone
&gt; who said :

&gt;&gt;I've been testing
&gt;&gt;my program today from the console, instead of through Eclipse (which is
&gt;&gt;why I don't see this as an Eclipse issue).

&gt; So often a CLEAN compile (where you delete  all class files) clears up
&gt; such strange behaviour. It is often a changed static final not getting
&gt; propagated. It is the first thing to try. It takes no brain power, and
&gt; clears the decks for analysis of more serious problems.
">

Here's the part I don't get: If it's a problem with a class in my program,
why is it that the stacktrace doesn't even show a single class from my
program?  Everything listed is part of the JVM.

Hal
</POST>
<POST>
<POSTER> Gordon Beaton &lt;n....@for.email&gt; </POSTER>
<POSTDATE> 2007-08-05T15:38:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
On Sun, 05 Aug 2007 14:45:16 -0400, Hal Vaughan wrote:
&gt; Here's the part I don't get: If it's a problem with a class in my
&gt; program, why is it that the stacktrace doesn't even show a single
&gt; class from my program? Everything listed is part of the JVM.
">

bash$ type -a java

Update any system components recently, or change your PATH?

/gordon

--
</POST>
<POST>
<POSTER> Hal Vaughan &lt;h...@thresholddigital.com&gt; </POSTER>
<POSTDATE> 2007-08-05T16:34:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
Gordon Beaton wrote:
&gt; On Sun, 05 Aug 2007 14:45:16 -0400, Hal Vaughan wrote:
&gt;&gt; Here's the part I don't get: If it's a problem with a class in my
&gt;&gt; program, why is it that the stacktrace doesn't even show a single
&gt;&gt; class from my program? Everything listed is part of the JVM.

&gt;   bash$ type -a java

&gt; Update any system components recently, or change your PATH?
">

That's what's puzzling: I haven't changed a thing.  I had been in Eclipse
for several hours and during breaks was in my e-mail program or Firefox.  I
didn't restart either program, so nothing should have changed.

I think once I get chance, I'll run fsck to verify the drive.

Hal
</POST>
<POST>
<POSTER> Roedy Green &lt;see_webs...@mindprod.com.invalid&gt; </POSTER>
<POSTDATE> 2007-08-05T21:23:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
&gt;Any ideas?  I figure I have to reinstall Java to fix this,
&gt;but if there's other ways to do it, I'm open to them
">

Uninstall/reinstall takes only a few minutes of your time.  You can do
something else while it hums away in the background.  There is not
much benefit in deep analysis UNTIL you have exhausted all the easy
mindless fixes.
--
Roedy Green Canadian Mind Products
The Java Glossary
http://mindprod.com
</POST>
<POST>
<POSTER> Hal Vaughan &lt;h...@thresholddigital.com&gt; </POSTER>
<POSTDATE> 2007-08-05T22:46:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
Roedy Green wrote:
&gt;&gt;Any ideas?  I figure I have to reinstall Java to fix this,
&gt;&gt;but if there's other ways to do it, I'm open to them
&gt; Uninstall/reinstall takes only a few minutes of your time.  You can do
&gt; something else while it hums away in the background.  There is not
&gt; much benefit in deep analysis UNTIL you have exhausted all the easy
&gt; mindless fixes.
">

In the end, I did that, but also had to make a change in /etc/alternatives.
For some reason, it would not remove the jdk for Java 6 completely.  I
also, out of paranoia, wanted to be sure that it wasn't something I had
done that I thought was so trivial I hadn't even remembered it.  For now,
I've just switched over to Java 5 by changing the link
in /etc/alternatives.

Hal
</POST>
<POST>
<POSTER> Roedy Green &lt;see_webs...@mindprod.com.invalid&gt; </POSTER>
<POSTDATE> 2007-08-06T17:27:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
&gt;In the end, I did that, but also had to make a change in /etc/alternatives.
&gt;For some reason, it would not remove the jdk for Java 6 completely.
">

The Java uninstalls are hopeless. Since it is not multiplatform I
think Sun considers it toilet duty and puts their new guys on it. I
have always done some touchup to the files and the registry when it
was done to clean our a JRE/JDK completely.
--
Roedy Green Canadian Mind Products
The Java Glossary
http://mindprod.com
</POST>
<POST>
<POSTER> &quot;Larry Barowski&quot; &lt;MElarrybar-AT-eng_DOT_auburnANOTHERDOTeduEND&gt; </POSTER>
<POSTDATE> 2007-08-06T19:32:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
&quot;Hal Vaughan&quot; &lt;h ... @thresholddigital.com&gt; wrote in message
">

news:b7WdnRlVaa_8hyvbnZ2dnUVZ_qrinZ2d@comcast.com ...

<QUOTE PREVIOUSPOST="
&gt; Do you mean disk error in the JRE or in my program?  From what I see in
&gt; the
&gt; stacktrace, Java never even got to the point of loading any of my classes.
">

I mean an error on the physical disk.
</POST>
</TEXT>
</BODY>
</DOC>
