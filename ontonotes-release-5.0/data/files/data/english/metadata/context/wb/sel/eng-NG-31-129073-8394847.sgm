<DOC>
<DOCID> eng-NG-31-129073-8394847 </DOCID>
<DOCTYPE SOURCE="usenet"> USENET TEXT </DOCTYPE>
<DATETIME> 2007-07-17T03:39:00 </DATETIME>
<BODY>
<HEADLINE>
Later Versions of &quot;*grep&quot;
</HEADLINE>
<TEXT>
<POST>
<POSTER> Malcolm Johnston &lt;dr...@internode.on.net&gt; </POSTER>
<POSTDATE> 2007-07-17T03:39:00 </POSTDATE>
Most of us know that, way back when, and Ken Thompson still had a black beard,
that there were three basic version of &quot;grep&quot;, with prefixed or flags that
turned them on a such, but not fully integrated version of this tool that
would work as quickly as the three versions.  This, I think, went by the
board, sometime ago, what with faster processors, DFA-type algorithms and the
like.  Now we seem to have mostly one, copied into it's various destinations
by the squanders, or symlinked by the thrifty.  What the hell!  It's all
gotten so much bigger and faster, so why bother: the toolbox approach was
alright for tradesman, who actually had toolboxes, but for the rest....

I discovered this, a decade or so ago, when an out-of-the-box distribution ran
(very signifcantly more slowly) that equivalent pattern-matchers in &quot;awk&quot;
and &quot;perl&quot;.  The problem was easy enough to fix, it just involved resetting
the &quot;$LANG&quot; variable in the shell to &quot;C&quot; or &quot;POSIX&quot;.  The current &quot;en_US&quot;
setting produces a much more attenuated problem of the one described above,
and isn't worth worrying about unless, as I do (I'm a linguist) you
use &quot;*grep&quot; repetetively, where it surges once more into prominence.  The
actual culprit is the &quot;as-shipped `fgrep', which has a very curious
conception of what a word is, unless it is operating in the right locale.  I
haven't bothered to localize this exactly, but I know from &quot;strace&quot; that many
processes do a fair bit of locale-checking on their way to execution.  Given
that English as a mother-tongue is the fourth-most spoken language on the
planet, and as a second (and, in many case, semi-bilingual setting) is spoken
by more than 1 billion people, a great many of whom do not speak or write
American dialects of English, maybe the developers of &quot;*grep&quot; should take
this into account.

I personally solved the problem by replacing my sym-linked &quot;fgrep&quot; with a
far-older (yet fully functional) version.  Maybe I should forward this one as
a &quot;bugs&quot; report, although it's been a bug for years.  Maybe we should all
talk POSIX (I have certain professional doubts about that).  Search lists,
the &quot;-f&quot; option, is not, I think, behaving nicely.

Cheers,
Malcolm Johhston
--
SLUG - Sydney Linux User's Group Mailing List - http://slug.org.au/
Subscription info and FAQs: http://slug.org.au/faq/mailinglists.html
</POST>
<POST>
<POSTER> Adam Kennedy &lt;a...@phase-n.com&gt; </POSTER>
<POSTDATE> 2007-07-17T08:27:00 </POSTDATE>
Heavy grep users may also be interested in &quot;ack&quot;.

http://search.cpan.org/dist/ack/ack

Adam K

<QUOTE PREVIOUSPOST="
Malcolm Johnston wrote:
&gt; Most of us know that, way back when, and Ken Thompson still had a black beard,
&gt; that there were three basic version of &quot;grep&quot;, with prefixed or flags that
&gt; turned them on a such, but not fully integrated version of this tool that
&gt; would work as quickly as the three versions.  This, I think, went by the
&gt; board, sometime ago, what with faster processors, DFA-type algorithms and the
&gt; like.  Now we seem to have mostly one, copied into it's various destinations
&gt; by the squanders, or symlinked by the thrifty.  What the hell!  It's all
&gt; gotten so much bigger and faster, so why bother: the toolbox approach was
&gt; alright for tradesman, who actually had toolboxes, but for the rest....

&gt; I discovered this, a decade or so ago, when an out-of-the-box distribution ran
&gt; (very signifcantly more slowly) that equivalent pattern-matchers in &quot;awk&quot;
&gt; and &quot;perl&quot;.  The problem was easy enough to fix, it just involved resetting
&gt; the &quot;$LANG&quot; variable in the shell to &quot;C&quot; or &quot;POSIX&quot;.  The current &quot;en_US&quot;
&gt; setting produces a much more attenuated problem of the one described above,
&gt; and isn't worth worrying about unless, as I do (I'm a linguist) you
&gt; use &quot;*grep&quot; repetetively, where it surges once more into prominence.  The
&gt; actual culprit is the &quot;as-shipped `fgrep', which has a very curious
&gt; conception of what a word is, unless it is operating in the right locale.  I
&gt; haven't bothered to localize this exactly, but I know from &quot;strace&quot; that many
&gt; processes do a fair bit of locale-checking on their way to execution.  Given
&gt; that English as a mother-tongue is the fourth-most spoken language on the
&gt; planet, and as a second (and, in many case, semi-bilingual setting) is spoken
&gt; by more than 1 billion people, a great many of whom do not speak or write
&gt; American dialects of English, maybe the developers of &quot;*grep&quot; should take
&gt; this into account.

&gt; I personally solved the problem by replacing my sym-linked &quot;fgrep&quot; with a
&gt; far-older (yet fully functional) version.  Maybe I should forward this one as
&gt; a &quot;bugs&quot; report, although it's been a bug for years.  Maybe we should all
&gt; talk POSIX (I have certain professional doubts about that).  Search lists,
&gt; the &quot;-f&quot; option, is not, I think, behaving nicely.

&gt; Cheers,
&gt; Malcolm Johhston
">

--
SLUG - Sydney Linux User's Group Mailing List - http://slug.org.au/
Subscription info and FAQs: http://slug.org.au/faq/mailinglists.html
</POST>
</TEXT>
</BODY>
</DOC>
