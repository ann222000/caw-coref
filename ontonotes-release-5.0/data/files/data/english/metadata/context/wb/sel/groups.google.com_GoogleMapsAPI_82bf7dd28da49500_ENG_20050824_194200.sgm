<DOC>
<DOCID> groups.google.com_GoogleMapsAPI_82bf7dd28da49500_ENG_20050824_194200 </DOCID>
<DOCTYPE SOURCE="usenet">USENET TEXT</DOCTYPE>
<DATETIME>2005-08-24T19:42:00</DATETIME>
<BODY>
<HEADLINE>
ESRI shapefiles
</HEADLINE>
<TEXT>

<POST>
<POSTER> GT GIS in NJ </POSTER>
<POSTDATE> 2005-08-24T19:42:00 </POSTDATE>

I am an experienced GIS guy, but new to the Google map API. I can see
from reading back in this forum that there is a way to overlay an ESRI
shapefile into the GMap. Can someone give me a quick jumpstart please.
What other data formats are supported. It looks as if you can render
a polyline as a series of LAT/LON points in decimal degrees if need be.
Is this the only way? JTF

</POST>



<POST>
<POSTER> Bill </POSTER>
<POSTDATE> 2005-08-24T20:01:00 </POSTDATE>

JT,

I think that Lat/Lon is the only way.

I tried ESRI Ungenerate, but found MapInfo MIF format to be easier to
deal with -- still had to do a little manipulating in Excel to get it
into the proper format.

This is what I ended up with from the MIF export.

Bill

</POST>



<POST>
<POSTER> Kyle Mulka </POSTER>
<POSTDATE> 2005-08-24T20:32:00 </POSTDATE>

Have you looked into WFS? I've almost got the WFS to Google Maps
conversion for simple features (points, lines, polygons) figured out.

-Kyle Mulka


</POST>



<POST>
<POSTER> Bill </POSTER>
<POSTDATE> 2005-08-24T20:49:00 </POSTDATE>

Kyle,

I am just taking the easy way out and exporting the files from
Maptitude.

Here is what they look like.

But it would be nice to have something that automatically puts it into
GMap polyline format......wouldn't be too hard to do with the MIF file.

Bill

</POST>



<POST>
<POSTER> MattPF </POSTER>
<POSTDATE> 2005-08-24T23:00:00 </POSTDATE>

Bill,

I've written a PHP script that reads any .mif files in the same
directory as the PHP script and converts all the points to polylines
then plots it on a Gmap.

It's at work, I'm at home :) I promise to post it in the morning.
(are you comfortable editing PHP code to fit your needs?)

-Matt

</POST>



<POST>
<POSTER> Bill </POSTER>
<POSTDATE> 2005-08-24T23:38:00 </POSTDATE>

Thanks, Matt.

That will be extremely helpful (to me and others I am sure). I am very
much a neophyte re: PHP, but this will give me some real incentive to
learn something.

Bill

<QUOTE PREVIOUSPOST="
MattPF wrote:
&gt; Bill,

&gt; I've written a PHP script that reads any .mif files in the same
&gt; directory as the PHP script and converts all the points to polylines
&gt; then plots it on a Gmap.

&gt; It's at work, I'm at home :) I promise to post it in the morning.
&gt; (are you comfortable editing PHP code to fit your needs?)

&gt; -Matt

"/>


</POST>



<POST>
<POSTER> PebbleBreeze </POSTER>
<POSTDATE> 2005-08-25T12:12:00 </POSTDATE>

Yes. Please post the script.

I am plotting polylines and have converted the lines to nodes (points)
with start/stop
coordinates, and was thinking to generate polylines between them, but
WOW is
that a lot of coding for 2,000 nodes.

I was hoping Gmap had a similar design as Jshape.

PB

</POST>



<POST>
<POSTER> MattPF </POSTER>
<POSTDATE> 2005-08-25T11:21:00 </POSTDATE>

Ok guys script is ready. Note that it uses XMaps to shade the
polygons, but this can be easily done via regular GMap polylines.

Example is here:
(for Bill's data)

Download is here:

You'll need to edit index.php and change the $key variable.

Other than that, just put any .mif files in the MIFs folder, and it
looks in there and automatically reads and plots the data.

Note that this script should work with any text files containing a list
lat/long points.

</POST>



<POST>
<POSTER> Bill </POSTER>
<POSTDATE> 2005-08-25T11:41:00 </POSTDATE>

Thanks a bunch, Matt. Look forward to experimenting with it. The
shading adds a nice touch.

Bill

</POST>



<POST>
<POSTER> PebbleBreeze </POSTER>
<POSTDATE> 2005-08-25T15:28:00 </POSTDATE>

Hey Matt, thanks.

Thats funny that you are working on fightthebite because I am
consulting for the
vector agency on water quality issues! And I goto the website daily to
get updates
and have been impressed with the Gmap use - very nice.

</POST>



<POST>
<POSTER> MattPF </POSTER>
<POSTDATE> 2005-08-25T15:41:00 </POSTDATE>

What a coincidence! I'm the webmaster and in-house IT Admin for the
agency. I get calls at midnight to update the spraying status on the
website! argg!

</POST>



<POST>
<POSTER> Lance </POSTER>
<POSTDATE> 2005-08-25T17:34:00 </POSTDATE>


<QUOTE PREVIOUSPOST="
MattPF wrote:
&gt; Ok guys script is ready. Note that it uses XMaps to shade the
&gt; polygons, but this can be easily done via regular GMap polylines.

&gt; Example is here:
&gt; http://www.fightthebite.net/mif2gmap/  (for Bill's data)

&gt; Download is here:
&gt; http://www.fightthebite.net/mif2gmap/mif2gmap.zip

&gt; You'll need to edit index.php and change the $key variable.

&gt; Other than that, just put any .mif files in the MIFs folder, and it
&gt; looks in there and automatically reads and plots the data.

&gt; Note that this script should work with any text files containing a list
&gt; lat/long points.

"/>

Tried it, for some reason it is not reading the .mif file It
returns the following error.

&lt;b&gt;Warning&lt;/b&gt;: file(MIFS/mellette.mif): failed to open stream: No
such file or directory in &lt;b&gt;/srv/www/mywebsite/index.php&lt;/b&gt; on line
&lt;b&gt;82&lt;/b&gt;&lt;br /&gt;
&lt;br /&gt;
&lt;b&gt;Warning&lt;/b&gt;: Invalid argument supplied for foreach() in
&lt;b&gt;/srv/www/mywebsite/scripture/satmap_gpx.php&lt;/b&gt; on line &lt;b&gt;84&lt;/b&gt;&lt;br
/&gt;

Any suggestions?

</POST>



<POST>
<POSTER> MattPF </POSTER>
<POSTDATE> 2005-08-25T22:32:00 </POSTDATE>

Hmm.. Make sure you have the folder:
/srv/www/mywebsite/MIFs/

and the file
/srv/www/mywebsite/MIFs/mellette.mif

Also your server may be case sensative. Check to make sure it's MIFS
or MIFs or mifs, etc.

</POST>



<POST>
<POSTER> Bill </POSTER>
<POSTDATE> 2005-08-25T23:51:00 </POSTDATE>

Works great, Matt.

It loaded two MIF files -- one with the South Dakota districts and the
other with Mississippi districts -- 10 polylines in all without a
hitch.

Thanks again,

Bill

</POST>



<POST>
<POSTER> MattPF </POSTER>
<POSTDATE> 2005-08-26T08:06:00 </POSTDATE>

Awesome Bill.. I admit the code may be sloppy, it was something I threw
together for test purposes only, but good to hear it suits you well.

</POST>



<POST>
<POSTER> Joel in NJ </POSTER>
<POSTDATE> 2005-08-26T09:16:00 </POSTDATE>


<QUOTE PREVIOUSPOST="
MattPF wrote:
&gt; Awesome Bill.. I admit the code may be sloppy, it was something I threw
&gt; together for test purposes only, but good to hear it suits you well.

"/>

Thanks everyone - it looks like my path of least resistence at this
point will be ESRI Shp &gt; MIF &gt; Bill's script &gt; GMap poly. I am
interested in looking into WMS &amp; WFS as well and look forward to
joining into the discussion. Joel

</POST>



<POST>
<POSTER> Joel in NJ </POSTER>
<POSTDATE> 2005-08-26T09:19:00 </POSTDATE>

Sorry - I meant Matt's script - give credit where credit is due. Joel

</POST>



<POST>
<POSTER> MattPF </POSTER>
<POSTDATE> 2005-08-26T10:51:00 </POSTDATE>

Joel,

I used to do the ESRI Shp &gt; MIF &gt; Bill's script &gt; GMap poly, but I've
found it more functional to go with:

ESRI Shp -&gt; PostgreSQL Database

Then in my Google Maps use an XMLHTTP request to query the database for
the lat/long points and plot them live. So:

ESRI Shp -&gt; PostgreSQL Database -&gt; Gmaps

For example:

Selects all the polygons in the database where the planned column is
set to &quot;Past&quot; then plots them live. It's easier to store, manage, and
query a library of polygons inside a spatial database such as
PostgreSQL/PostGIS instead of a bunch of MIF files.

One example I've used is a query of all zip code &quot;polygons&quot; overlapping
sacramento county &quot;polygon&quot; -&gt; which plots all zip codes in sac
county.

-Matt

</POST>



<POST>
<POSTER> 58sniper </POSTER>
<POSTDATE> 2005-08-26T11:58:00 </POSTDATE>


<QUOTE PREVIOUSPOST="
MattPF wrote:
&gt; One example I've used is a query of all zip code &quot;polygons&quot; overlapping
&gt; sacramento county &quot;polygon&quot; -&gt; which plots all zip codes in sac
&gt; county.

&gt; -Matt

"/>

If anyone comes up with a PHP/MySQL solution to do that, I'd be
interested. I need to plot zip codes, and I also need to plot city
boundaries (although not at the same time).

</POST>



<POST>
<POSTER> MattPF </POSTER>
<POSTDATE> 2005-08-26T15:54:00 </POSTDATE>

sniper,

I use PHP/PostgreSQL which isn't too far from what you're looking for.
This is my first venture with Postgre and it's not much different than
MySQL at this level.

If you're not going to be running spatial queries (searching for points
within polygons, or polygons overlapping other polygons) then you can
just store the outlines/boundaries as a series of lat/longs in a normal
MySQL table.

</POST>



<POST>
<POSTER> gizoto316 </POSTER>
<POSTDATE> 2005-08-26T16:16:00 </POSTDATE>

Now how do you get the shapfiles to MIF format using map info? I tried
opening it and the shapefile does not come up.

</POST>



<POST>
<POSTER> MattPF </POSTER>
<POSTDATE> 2005-08-26T16:35:00 </POSTDATE>

A suite of free GIS software called FWTools available at:

You could use them to translate the shapefiles to MapInfo mid/mif
format which is a simple readable ASCII format. The command would be
something
like:

ogr2ogr -f &quot;MapInfo File&quot; out.mif in.shp

Are the input shapefiles already in lat/long coordinates or are they in
a projected coordinate system? If they are in a projected coordinate
system, and you want to convert them to geographic (lat/long)
coordinates then you can use a slightly more complex command:

ogr2ogr -t_srs WGS84 -f &quot;Mapinfo File&quot; out.mif in.shp

</POST>



<POST>
<POSTER> dbally@gmail.com </POSTER>
<POSTDATE> 2005-08-29T22:40:00 </POSTDATE>

I got a method to work (finally) to add polygons to Google Maps. I am
by no stretch of the imagination a programmer. Keeping that in mind,
the basic process is:

1. Link to xmaps.1b.js at   (its an uber
useful extension for the Google API)
2. Create (or use existing) polygon in ArcMap. Be sure to set the data
frame coordinate system to WGS 84 (View --&gt; Data Fram Properties --&gt;
Coordinate System --&gt; Predefined --&gt; Geographic Coordinate Systems --&gt;
World --&gt; WGS 84)
3. Convert Verticies to Points (AcrToolbox --&gt; Data Management Tools
--&gt; Features --&gt; Feature Verticies to Points)
4. Add XY Coords - there are scripts to do this in 8.x (check out
) and a built in funcion (ArcToolbox --&gt; Data Management
Tools --&gt; Features --&gt; Add XY Coordinates) in 9.x.
5. In ArcCatalog, create a new empty personal geodatabase
6. Back in ArcMap, export the TABLE of the verticies to the
geodatabase, not the shapfile.
7. Upload the geodatabase to your web server.
8. Use an asp file to create xml. For this example, Polytable is the
name of the geodatabase I created in step 4. Harris is the name of the
table I exported into it. Copy and paste this section and save as an
*.asp. Upload to your web server. It creates a file in the format that
Goolge expects a la
.
I got hints and tips from

&lt;%
response.ContentType = &quot;text/xml&quot;
set conn=Server.CreateObject(&quot;ADODB.Connection&quot;)
conn.provider=&quot;Microsoft.Jet.OLEDB.4.0;&quot;
conn.open server.mappath(&quot;/maps/polytable.mdb&quot;)
sql=&quot;select POINT_X, POINT_Y from harris&quot;
set rs=Conn.Execute(sql)

rs.MoveFirst()

response.write(&quot;&lt;?xml version='1.0' encoding='ISO-8859-1'?&gt;&quot;)
response.write(&quot;&lt;markers&gt;&quot;)

while (not rs.EOF)

response.write(&quot;&lt;marker&quot;&amp;&quot;space&quot;&amp;&quot;lat&quot;&amp;&quot;equalsign&quot;&amp;&quot;quote&quot;&amp;
rs(&quot;POINT_Y&quot;) &amp;&quot;quote&quot;&amp;&quot;space&quot;&amp;&quot;lng&quot;&amp;&quot;equalsign&quot;&amp;&quot;quote&quot;&amp;
rs(&quot;POINT_X&quot;) &amp;&quot;quote&quot;&amp;&quot;/&gt;&quot;)

rs.MoveNext()
wend

rs.close()
conn.close()

response.write(&quot;&lt;/markers&gt;&quot;)

%&gt;

Go to   to see it in action.

Back to the point about me not being a programmer. I was having issues
in Firefox creating the proper xml (something partially about not
closing the &lt;marker&gt; tag and partially someting about having an '='. To
circumvent these types of errors I just have it write 'quote' where
there needs to be a &quot;, 'equalsign' where there should be a =, 'space'
where there needs to be a &quot;&quot; to take care of punctuation. I copied the
output from Firefox into a text editor and did a Find-Replace to find
and replace (creatively enough) the writtin out punctuation with the
symbol version. I then saved the xml.

9. Then upload said xml to the web server too. See
for the output.

The test website I've been playing with is

I hope these instructions will be useful! Not the easiest process in
the world, I know, but it should work. Thanks.

</POST>



<POST>
<POSTER> dbally@gmail.com </POSTER>
<POSTDATE> 2005-08-31T18:07:00 </POSTDATE>

I've got an update. The new asp code is . . .

&lt;%
response.ContentType = &quot;text/xml&quot;
set conn=Server.CreateObject(&quot;ADODB.Connection&quot;)
conn.provider=&quot;Microsoft.Jet.OLEDB.4.0;&quot;
conn.open server.mappath(&quot;/maps/polytable.mdb&quot;)
sql=&quot;select POINT_X, POINT_Y from harris&quot;
set rs=Conn.Execute(sql)

rs.MoveFirst()

response.write(&quot;&lt;?xml version='1.0' encoding='ISO-8859-1'?&gt;&quot;)
response.write(&quot;&lt;markers&gt;&quot;)

while (not rs.EOF)
response.write(&quot;&lt;marker&quot;&amp;&quot;&quot;&amp;&quot;lat=&quot;&amp; chr(34) &amp; rs(&quot;POINT_Y&quot;) &amp;
chr(34) &amp;&quot;&quot;&amp;&quot;lng=&quot;&amp; chr(34) &amp;rs(&quot;POINT_X&quot;) &amp; chr(34) &amp;&quot;/&gt;&quot;)
rs.MoveNext()
wend

rs.close()
conn.close()
response.write(&quot;&lt;/markers&gt;&quot;)
%&gt;

If you check out the source of maps.danielbally.com/harris2.html you'll
see where you can refer to asp instead of xml in the request.open
portion. It works exactly the same and, this way, you can skip the last
part of #8. Good times.

</POST>



<POST>
<POSTER> dbally@gmail.com </POSTER>
<POSTDATE> 2005-08-31T18:44:00 </POSTDATE>

Another update. This is still a work in progress, so please bear with
me. Skip step 6. Exporting the shapefile works just fine. A dbf is a
dbf anyway it gets in the geodatabase. Thanks.

</POST>



<POST>
<POSTER> Valery </POSTER>
<POSTDATE> 2005-09-02T06:45:00 </POSTDATE>

I the leader of development Typeconvert for ArcGIS.

What to improve in the module for Google Maps?

My primitive probe

Russian publications


</POST>



<POST>
<POSTER> wtb </POSTER>
<POSTDATE> 2005-09-12T16:35:00 </POSTDATE>

Just in case you find this interesting. Here is a link where you can
directly upload a polyline shapefiles (WGS84) and see it displayed on a
Googlemap. It even works for fairly large shapefiles.


</POST>



<POST>
<POSTER> Bill </POSTER>
<POSTDATE> 2005-09-12T17:47:00 </POSTDATE>

That's neat, wtb.

I just uploaded the shapfile for 10 voting precincts in Tunica County,
MS and the lines were rendered very quickly.

This is a useful resource.

Bill

</POST>



<POST>
<POSTER> gizoto316 </POSTER>
<POSTDATE> 2005-09-14T24:26:00 </POSTDATE>

Arg. The site is not working. Anyone know of any similar sites?

</POST>



<POST>
<POSTER> wtb </POSTER>
<POSTDATE> 2005-10-01T06:35:00 </POSTDATE>

I should have added... the site only works for polyline shapefiles,
and the uploaded shapefiles should preferable not be bigger than about
200 kb for best results. Since my original posting I changed the
site so that at least it would give a warning when the shapefile is not
suitable. (Before it just crashed when the shapefile was not
suitable.)

Werner

</POST>



<POST>
<POSTER> haochi.tk/QQS </POSTER>
<POSTDATE> 2005-10-01T08:03:00 </POSTDATE>

The site is not working!


</POST>



<POST>
<POSTER> wtb </POSTER>
<POSTDATE> 2005-10-01T10:40:00 </POSTDATE>

Sorry I was referrring to

It is just a site where you can upload polyline shapefiles and display
it directly in google maps.

</POST>



</TEXT>
</BODY>
</DOC>
