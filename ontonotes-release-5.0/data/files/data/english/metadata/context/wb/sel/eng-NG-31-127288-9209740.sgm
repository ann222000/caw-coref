<DOC>
<DOCID> eng-NG-31-127288-9209740 </DOCID>
<DOCTYPE SOURCE="usenet"> USENET TEXT </DOCTYPE>
<DATETIME> 2007-09-07T13:00:00 </DATETIME>
<BODY>
<HEADLINE>
compiling on AIX/PowerPPC
</HEADLINE>
<TEXT>
<POST>
<POSTER> Hamptonio &lt;hampto...@gmail.com&gt; </POSTER>
<POSTDATE> 2007-09-07T13:00:00 </POSTDATE>
Hi,

I am hoping to use sage on some supercomputers and/or clusters.
Currently I am trying to compile it on the IBM Power4 machine at the
Minnesota Supercomputing Center (see http://www.msi.umn.edu/power4/index.html
for some details on that).   Its about 300 Power4 processors running
AIX.

I just tried compiliing sage-2.8.3.6 on it, and it started off OK but
failed while compiling libgcrypt.  It seems this is often a difficult
package, since it looks like a sticking point on Solaris and cygwin as
well.  Is there a  way to build around that? Would it help to try an
earlier sage version?

Marshall Hampton
</POST>
<POST>
<POSTER> &quot;William Stein&quot; &lt;wst...@gmail.com&gt; </POSTER>
<POSTDATE> 2007-09-07T13:10:00 </POSTDATE>
On 9/7/07, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

<QUOTE PREVIOUSPOST="
&gt; I am hoping to use sage on some supercomputers and/or clusters.
&gt; Currently I am trying to compile it on the IBM Power4 machine at the
&gt; Minnesota Supercomputing Center (see http://www.msi.umn.edu/power4/index.html
&gt; for some details on that).   Its about 300 Power4 processors running
&gt; AIX.
">

Porting SAGE to a new architecture / operating system is a
potentially difficult project, that should not
be underestimated.  Nobody has ever compiled SAGE
(or probably many of its components) under AIX, so I predict
based on experience that the number of problems that one
would have will be at least enough to keep 2 or 3 very very
smart people occupied for several weeks, and maybe more.
In short, SAGE isn't supported on AIX or Power4,
and isn't likely to be unless several SAGE developers had
access to such a machine -- then it probably would get
supported there.   I of course really really wish SAGE were
supported on a wider range of machines, especially those
used in supercomputing (!)

<QUOTE PREVIOUSPOST="
&gt; I just tried compiliing sage-2.8.3.6 on it, and it started off OK but
&gt; failed while compiling libgcrypt.  It seems this is often a difficult
&gt; package, since it looks like a sticking point on Solaris and cygwin as
&gt; well.  Is there a  way to build around that? Would it help to try an
&gt; earlier sage version?
">

If a package called foo.spkg won't build, if you do
touch spkg/installed/foo
then type &quot;make&quot; the build will continue as if the package
did build successfully.

One can fully build SAGE without libgcrypt or any of the gnutls stuff.
It will work -- the only thing that might fail is the notebook, but
then only in secure mode.

William
</POST>
<POST>
<POSTER> mabshoff &lt;Michael.Absh...@fsmath.mathematik.uni-dortmund.de&gt; </POSTER>
<POSTDATE> 2007-09-07T13:10:00 </POSTDATE>
On Sep 7, 7:00 pm, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

<QUOTE PREVIOUSPOST="
&gt; Hi,

&gt; I am hoping to use sage on some supercomputers and/or clusters.
&gt; Currently I am trying to compile it on the IBM Power4 machine at the
&gt; Minnesota Supercomputing Center (see http://www.msi.umn.edu/power4/index.html
&gt; for some details on that).   Its about 300 Power4 processors running
&gt; AIX.

&gt; I just tried compiliing sage-2.8.3.6 on it, and it started off OK but
&gt; failed while compiling libgcrypt.  It seems this is often a difficult
&gt; package, since it looks like a sticking point on Solaris and cygwin as
&gt; well.  Is there a  way to build around that? Would it help to try an
&gt; earlier sage version?

&gt; Marshall Hampton
">

Hey Marshall,

I believe libgcrypt is &quot;only&quot; the openssl replacement. So if you have
an openssl on that box you can probably ignore it. Do a touch in spkg/
installed/name_of_spkg to skip over it. I also believe to recall that
all the SLL stuff is only needed for the notebook, so I am fairly
certain that you won't run your computations that way.

I am not sure if AIX these days is pure 64 bit or a hyprid 32/64
userspace. If it is pure 64 bit you shouldn't run into too much
trouble. Let me know if you have any problems. I anybody has access to
an AIX box for me I would be willing to get Sage to work on AIX, too -
I just love UNIX :)

Cheers,

Michael
</POST>
<POST>
<POSTER> Hamptonio &lt;hampto...@gmail.com&gt; </POSTER>
<POSTDATE> 2007-09-07T14:04:00 </POSTDATE>
Thanks guys.  I can't use the notebook anyway from that machine, I
would be running pre-written scripts to do heavy calculations.  It got
far enough that I am hopeful I can get it to where it does what I
need.

Cheers,
Marshall

On Sep 7, 11:10 am, mabshoff &lt;Michael.Absh ... @fsmath.mathematik.uni-

<QUOTE PREVIOUSPOST="
dortmund.de&gt; wrote:
&gt; On Sep 7, 7:00 pm, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

&gt; &gt; Hi,

&gt; &gt; I am hoping to use sage on some supercomputers and/or clusters.
&gt; &gt; Currently I am trying to compile it on the IBM Power4 machine at the
&gt; &gt; Minnesota Supercomputing Center (see http://www.msi.umn.edu/power4/index.html
&gt; &gt; for some details on that).   Its about 300 Power4 processors running
&gt; &gt; AIX.

&gt; &gt; I just tried compiliing sage-2.8.3.6 on it, and it started off OK but
&gt; &gt; failed while compiling libgcrypt.  It seems this is often a difficult
&gt; &gt; package, since it looks like a sticking point on Solaris and cygwin as
&gt; &gt; well.  Is there a  way to build around that? Would it help to try an
&gt; &gt; earlier sage version?

&gt; &gt; Marshall Hampton

&gt; Hey Marshall,

&gt; I believe libgcrypt is &quot;only&quot; the openssl replacement. So if you have
&gt; an openssl on that box you can probably ignore it. Do a touch in spkg/
&gt; installed/name_of_spkg to skip over it. I also believe to recall that
&gt; all the SLL stuff is only needed for the notebook, so I am fairly
&gt; certain that you won't run your computations that way.

&gt; I am not sure if AIX these days is pure 64 bit or a hyprid 32/64
&gt; userspace. If it is pure 64 bit you shouldn't run into too much
&gt; trouble. Let me know if you have any problems. I anybody has access to
&gt; an AIX box for me I would be willing to get Sage to work on AIX, too -
&gt; I just love UNIX :)

&gt; Cheers,

&gt; Michael
">
</POST>
<POST>
<POSTER> mabshoff &lt;Michael.Absh...@fsmath.mathematik.uni-dortmund.de&gt; </POSTER>
<POSTDATE> 2007-09-07T14:09:00 </POSTDATE>
On Sep 7, 8:04 pm, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

<QUOTE PREVIOUSPOST="
&gt; Thanks guys.  I can't use the notebook anyway from that machine, I
&gt; would be running pre-written scripts to do heavy calculations.  It got
&gt; far enough that I am hopeful I can get it to where it does what I
&gt; need.

&gt; Cheers,
&gt; Marshall
">

Cool, in case you need SSL (for DSAGE) you can install the optional
openssl package from http://www.sagemath.org/packages/optional/openssl-0.9.8d.p1.spkg

Cheers,

Michael
</POST>
<POST>
<POSTER> &quot;William Stein&quot; &lt;wst...@gmail.com&gt; </POSTER>
<POSTDATE> 2007-09-07T14:50:00 </POSTDATE>
On 9/7/07, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

<QUOTE PREVIOUSPOST="
&gt; Thanks guys.  I can't use the notebook anyway from that machine, I
&gt; would be running pre-written scripts to do heavy calculations.  It got
&gt; far enough that I am hopeful I can get it to where it does what I
&gt; need.
">

Please post anything you figure out.  We would be very happy
to have AIX officially supported one day!!

William
</POST>
<POST>
<POSTER> Hamptonio &lt;hampto...@gmail.com&gt; </POSTER>
<POSTDATE> 2007-09-08T10:33:00 </POSTDATE>
It turns out that I also have access to a linux-based supercomputer,
(an IBM BladeCenter with about 300 quad-processor nodes), which should
be faster than the Power4 system anyway.  So I will give up, for the
moment, trying to install sage on AIX.  I have installed sage-2.8.3.6
on the BladeCenter successfully, with the following &quot;make test&quot;
failures:

sage -t  devel/sage-main/sage/modular/modform/ambient_g1.py
sage -t  devel/sage-main/sage/modular/modform/
eisenstein_submodule.py
sage -t  devel/sage-main/sage/modular/modform/submodule.py
sage -t  devel/sage-main/sage/rings/real_rqdf.pyx
Total time for all tests: 2137.4 seconds

Probably some of those have been fixed in 2.8.4.

Now I'll have to learn more about DSage; I am not sure how to exploit
all those processors the way I usually code.

Cheers,
Marshall

On Sep 7, 1:50 pm, &quot;William Stein&quot; &lt;wst ... @gmail.com&gt; wrote:

<QUOTE PREVIOUSPOST="
&gt; On 9/7/07, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

&gt; &gt; Thanks guys.  I can't use the notebook anyway from that machine, I
&gt; &gt; would be running pre-written scripts to do heavy calculations.  It got
&gt; &gt; far enough that I am hopeful I can get it to where it does what I
&gt; &gt; need.

&gt; Please post anything you figure out.  We would be very happy
&gt; to have AIX officially supported one day!!

&gt; William
">
</POST>
<POST>
<POSTER> mabshoff &lt;Michael.Absh...@fsmath.mathematik.uni-dortmund.de&gt; </POSTER>
<POSTDATE> 2007-09-08T11:24:00 </POSTDATE>
On Sep 8, 4:33 pm, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

<QUOTE PREVIOUSPOST="
&gt; It turns out that I also have access to a linux-based supercomputer,
&gt; (an IBM BladeCenter with about 300 quad-processor nodes), which should
&gt; be faster than the Power4 system anyway.  So I will give up, for the
&gt; moment, trying to install sage on AIX.
">

Ok, how far did you get?

<QUOTE PREVIOUSPOST="
&gt;  I have installed sage-2.8.3.6
&gt; on the BladeCenter successfully, with the following &quot;make test&quot;
&gt; failures:

&gt;         sage -t  devel/sage-main/sage/modular/modform/ambient_g1.py
&gt;         sage -t  devel/sage-main/sage/modular/modform/
&gt; eisenstein_submodule.py
&gt;         sage -t  devel/sage-main/sage/modular/modform/submodule.py
&gt;         sage -t  devel/sage-main/sage/rings/real_rqdf.pyx
&gt; Total time for all tests: 2137.4 seconds

&gt; Probably some of those have been fixed in 2.8.4.
">

Please do an &quot;./sage -upgrade&quot; and then rerun the testsuite. If any of
those persist we should fix them. There was a last minute 32 bit only
regression at the very end of 2.8.4. It was so late that William
respun the tarball ;)

<QUOTE PREVIOUSPOST="
&gt; Now I'll have to learn more about DSage; I am not sure how to exploit
&gt; all those processors the way I usually code.

&gt; Cheers,
&gt; Marshall
">

Cheers,

Michael
</POST>
<POST>
<POSTER> Hamptonio &lt;hampto...@gmail.com&gt; </POSTER>
<POSTDATE> 2007-09-09T11:14:00 </POSTDATE>
I didn't really try any further with the AIX compilation after
starting on the linux bladecenter.  I could try a bit if it is of
interest.

On the BladeCenter, only one test failed after upgrading to 2.8.4:

sage -t  devel/sage-main/sage/rings/real_rqdf.pyx
**********************************************************************
File &quot;real_rqdf.pyx&quot;, line 24:
sage: RQDF( 123.2) * RR (.543)
Expected:
66.89760000000000624851281827432114309792736749325567465385058291
Got:
NaN
**********************************************************************
1 items had failures:
1 of   9 in __main__.example_0
***Test Failed*** 1 failures.
For whitespace errors, see the file .doctest_real_rqdf.pyx

On Sep 8, 10:24 am, mabshoff &lt;Michael.Absh ... @fsmath.mathematik.uni-

<QUOTE PREVIOUSPOST="
dortmund.de&gt; wrote:
&gt; On Sep 8, 4:33 pm, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

&gt; &gt; It turns out that I also have access to a linux-based supercomputer,
&gt; &gt; (an IBM BladeCenter with about 300 quad-processor nodes), which should
&gt; &gt; be faster than the Power4 system anyway.  So I will give up, for the
&gt; &gt; moment, trying to install sage on AIX.

&gt; Ok, how far did you get?

&gt; &gt;  I have installed sage-2.8.3.6
&gt; &gt; on the BladeCenter successfully, with the following &quot;make test&quot;
&gt; &gt; failures:

&gt; &gt;         sage -t  devel/sage-main/sage/modular/modform/ambient_g1.py
&gt; &gt;         sage -t  devel/sage-main/sage/modular/modform/
&gt; &gt; eisenstein_submodule.py
&gt; &gt;         sage -t  devel/sage-main/sage/modular/modform/submodule.py
&gt; &gt;         sage -t  devel/sage-main/sage/rings/real_rqdf.pyx
&gt; &gt; Total time for all tests: 2137.4 seconds

&gt; &gt; Probably some of those have been fixed in 2.8.4.

&gt; Please do an &quot;./sage -upgrade&quot; and then rerun the testsuite. If any of
&gt; those persist we should fix them. There was a last minute 32 bit only
&gt; regression at the very end of 2.8.4. It was so late that William
&gt; respun the tarball ;)

&gt; &gt; Now I'll have to learn more about DSage; I am not sure how to exploit
&gt; &gt; all those processors the way I usually code.

&gt; &gt; Cheers,
&gt; &gt; Marshall

&gt; Cheers,

&gt; Michael
">
</POST>
<POST>
<POSTER> &quot;William Stein&quot; &lt;wst...@gmail.com&gt; </POSTER>
<POSTDATE> 2007-09-09T11:19:00 </POSTDATE>
On 9/9/07, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

<QUOTE PREVIOUSPOST="
&gt; On the BladeCenter, only one test failed after upgrading to 2.8.4:

&gt; sage -t  devel/sage-main/sage/rings/real_rqdf.pyx
&gt; **********************************************************************
&gt; File &quot;real_rqdf.pyx&quot;, line 24:
&gt;     sage: RQDF( 123.2) * RR (.543)
&gt; Expected:
&gt;     66.89760000000000624851281827432114309792736749325567465385058291
&gt; Got:
&gt;     NaN
&gt; **********************************************************************
&gt; 1 items had failures:
&gt;    1 of   9 in __main__.example_0
&gt; ***Test Failed*** 1 failures.
&gt; For whitespace errors, see the file .doctest_real_rqdf.pyx
">

What is the BladeCenter hardware-wise exactly?
Failure of the above test is very weird/curious.

William
</POST>
<POST>
<POSTER> Hamptonio &lt;hampto...@gmail.com&gt; </POSTER>
<POSTDATE> 2007-09-09T23:30:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
&gt;From the MSI webpage, it says the bladecenter is: &quot;...a Linux Cluster
">

from IBM. It is a IBM BladeCenter H with 307 LS 21 nodes. Each node
has two dual-core 2.6 GHz AMD Opteron processors sharing 8 GB of
memory.&quot;

The interactive node that I can read /proc/cpuinfo on says there are 4
cores, each with:
vendor_id       : AuthenticAMD
cpu family      : 15
model           : 65
model name      : Dual-Core AMD Opteron(tm) Processor 2218
stepping        : 2
cpu MHz         : 2600.209
cache size      : 1024 KB

uname -a:
Linux blade288 2.6.5-7.244-smp #1 SMP Mon Dec 12 18:32:25 UTC 2005
x86_64 x86_64 x86_64 GNU/Linux

Jobs are scheduled with something called PBS.

Polymake fails to compile, which is bad news for me - although I
haven't tried to install polymake on a fresh 2.8.4 install so it might
be a more pervasive problem.

One problem is that it looks like an older gcc, is this a problem(?):
****************************************************
GCC Version
gcc -v
Reading specs from /usr/lib64/gcc-lib/x86_64-suse-linux/3.3.3/specs
Configured with: ../configure --enable-threads=posix --prefix=/usr --
with-local-prefix=/usr/local --
infodir=/usr/share/info --mandir=/usr/share/man --enable-languages=c,c+
+,f77,objc,java,ada --disable
-checking --libdir=/usr/lib64 --enable-libgcj --with-gxx-include-dir=/
usr/include/g++ --with-slibdir
=/lib64 --with-system-zlib --enable-shared --enable-__cxa_atexit
x86_64-suse-linux
Thread model: posix
gcc version 3.3.3 (SuSE Linux)
****************************************************

It would be very cool if I could use this machine for polytope/
algebraic geometry/groebner basis stuff.  At the moment I am using it
for pretty routine bioinformatics stuff that I can do without sage if
necessary.

-Marshall

On Sep 9, 10:19 am, &quot;William Stein&quot; &lt;wst ... @gmail.com&gt; wrote:

<QUOTE PREVIOUSPOST="
&gt; On 9/9/07, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

&gt; &gt; On the BladeCenter, only one test failed after upgrading to 2.8.4:

&gt; &gt; sage -t  devel/sage-main/sage/rings/real_rqdf.pyx
&gt; &gt; **********************************************************************
&gt; &gt; File &quot;real_rqdf.pyx&quot;, line 24:
&gt; &gt;     sage: RQDF( 123.2) * RR (.543)
&gt; &gt; Expected:
&gt; &gt;     66.89760000000000624851281827432114309792736749325567465385058291
&gt; &gt; Got:
&gt; &gt;     NaN
&gt; &gt; **********************************************************************
&gt; &gt; 1 items had failures:
&gt; &gt;    1 of   9 in __main__.example_0
&gt; &gt; ***Test Failed*** 1 failures.
&gt; &gt; For whitespace errors, see the file .doctest_real_rqdf.pyx

&gt; What is the BladeCenter hardware-wise exactly?
&gt; Failure of the above test is very weird/curious.

&gt; William
">
</POST>
<POST>
<POSTER> &quot;William Stein&quot; &lt;wst...@gmail.com&gt; </POSTER>
<POSTDATE> 2007-09-09T23:35:00 </POSTDATE>
On 9/9/07, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

<QUOTE PREVIOUSPOST="
&gt; &gt;From the MSI webpage, it says the bladecenter is: &quot;...a Linux Cluster
&gt; from IBM. It is a IBM BladeCenter H with 307 LS 21 nodes. Each node
&gt; has two dual-core 2.6 GHz AMD Opteron processors sharing 8 GB of
&gt; memory.&quot;

&gt; The interactive node that I can read /proc/cpuinfo on says there are 4
&gt; cores, each with:
&gt; vendor_id       : AuthenticAMD
&gt; cpu family      : 15
&gt; model           : 65
&gt; model name      : Dual-Core AMD Opteron(tm) Processor 2218
&gt; stepping        : 2
&gt; cpu MHz         : 2600.209
&gt; cache size      : 1024 KB

&gt; uname -a:
&gt; Linux blade288 2.6.5-7.244-smp #1 SMP Mon Dec 12 18:32:25 UTC 2005
&gt; x86_64 x86_64 x86_64 GNU/Linux
">

Which linux distribution is it?  Try

cat /etc/issue

It's probably SUSE, since that is listed in the gcc output below.

Also, regarding polymake, maybe you should report what the
error is when it builds?

William

<QUOTE PREVIOUSPOST="
- Hide quoted text - - Show quoted text -
">

<QUOTE PREVIOUSPOST="
&gt; Jobs are scheduled with something called PBS.

&gt; Polymake fails to compile, which is bad news for me - although I
&gt; haven't tried to install polymake on a fresh 2.8.4 install so it might
&gt; be a more pervasive problem.

&gt; One problem is that it looks like an older gcc, is this a problem(?):
&gt; ****************************************************
&gt; GCC Version
&gt; gcc -v
&gt; Reading specs from /usr/lib64/gcc-lib/x86_64-suse-linux/3.3.3/specs
&gt; Configured with: ../configure --enable-threads=posix --prefix=/usr --
&gt; with-local-prefix=/usr/local --
&gt; infodir=/usr/share/info --mandir=/usr/share/man --enable-languages=c,c+
&gt; +,f77,objc,java,ada --disable
&gt; -checking --libdir=/usr/lib64 --enable-libgcj --with-gxx-include-dir=/
&gt; usr/include/g++ --with-slibdir
&gt; =/lib64 --with-system-zlib --enable-shared --enable-__cxa_atexit
&gt; x86_64-suse-linux
&gt; Thread model: posix
&gt; gcc version 3.3.3 (SuSE Linux)
&gt; ****************************************************

&gt; It would be very cool if I could use this machine for polytope/
&gt; algebraic geometry/groebner basis stuff.  At the moment I am using it
&gt; for pretty routine bioinformatics stuff that I can do without sage if
&gt; necessary.

&gt; -Marshall
">

--
William Stein
Associate Professor of Mathematics
University of Washington
http://www.williamstein.org
</POST>
<POST>
<POSTER> mabshoff &lt;Michael.Absh...@fsmath.mathematik.uni-dortmund.de&gt; </POSTER>
<POSTDATE> 2007-09-09T23:50:00 </POSTDATE>
Hello,

<QUOTE PREVIOUSPOST="
&gt; &gt; &gt; On the BladeCenter, only one test failed after upgrading to 2.8.4:

&gt; &gt; &gt; sage -t  devel/sage-main/sage/rings/real_rqdf.pyx
&gt; &gt; &gt; **********************************************************************
&gt; &gt; &gt; File &quot;real_rqdf.pyx&quot;, line 24:
&gt; &gt; &gt;     sage: RQDF( 123.2) * RR (.543)
&gt; &gt; &gt; Expected:
&gt; &gt; &gt;     66.89760000000000624851281827432114309792736749325567465385058291
&gt; &gt; &gt; Got:
&gt; &gt; &gt;     NaN
&gt; &gt; &gt; **********************************************************************
&gt; &gt; &gt; 1 items had failures:
&gt; &gt; &gt;    1 of   9 in __main__.example_0
&gt; &gt; &gt; ***Test Failed*** 1 failures.
&gt; &gt; &gt; For whitespace errors, see the file .doctest_real_rqdf.pyx
">

In addition to what William said:

- If you run &quot;make check&quot; with the mpfr spkg do all tests pass?
- The compiler is definitely a little long in the tooth, The is an
experimental gcc 4.2.1 spkg at sagemath.org. You could install that,
wipe out spkg/installed and rebuild Sage from scratch.
- What happens if you install a binary release of Sage? Does the
problem go away? Chances are with that crufty an install unless some
current libstdc++.so is around Sage 2.8.4[.1] won't run, especially on
x86-64. You probably are better of with building the experimental gcc
spkg. If you have any problems with that let me know.

Cheers,

Michael
</POST>
<POST>
<POSTER> Hamptonio &lt;hampto...@gmail.com&gt; </POSTER>
<POSTDATE> 2007-09-10T23:36:00 </POSTDATE>
cat /etc/issue gives:

Welcome to SUSE LINUX Enterprise Server 9 (x86_64) - Kernel \r (\l).

The tail end of the polymake build, when it crashes, has the
following:

make[2]: Leaving directory `/home/bc1/hamptonm/sage-2.8.3.6/spkg/build/
polymake-2.2.p2/build/modules/graph'
g++   -I/home/bc1/hamptonm/sage-2.8.3.6/local/lib  -I/home/bc1/
hamptonm/sage-2.8.3.6/local/lib  -o cayley_embedding
cayley_embedding.o libpolytope.a ../../lib/libpoly.a  -lgmp
collect2: ld terminated with signal 11 [Segmentation fault]
make[2]: *** [cayley_embedding] Error 1
make[1]: *** [do_all] Error 2
make[1]: Leaving directory `/home/bc1/hamptonm/sage-2.8.3.6/spkg/build/
polymake-2.2.p2/build/apps/polytope'
make: *** [all] Error 2
cp: cannot create regular file `/home/bc1/hamptonm/sage-2.8.3.6/local/
polymake/bin/polymake': No such file or directory
Do not worry if there is an error message above, as long as the build
says it worked below.
Error building and installing polymake

real    6m1.033s
user    5m19.608s
sys     0m31.232s

On Sep 9, 10:35 pm, &quot;William Stein&quot; &lt;wst ... @gmail.com&gt; wrote:

<QUOTE PREVIOUSPOST="
&gt; On 9/9/07, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

&gt; &gt; &gt;From the MSI webpage, it says the bladecenter is: &quot;...a Linux Cluster
&gt; &gt; from IBM. It is a IBM BladeCenter H with 307 LS 21 nodes. Each node
&gt; &gt; has two dual-core 2.6 GHz AMD Opteron processors sharing 8 GB of
&gt; &gt; memory.&quot;

&gt; &gt; The interactive node that I can read /proc/cpuinfo on says there are 4
&gt; &gt; cores, each with:
&gt; &gt; vendor_id       : AuthenticAMD
&gt; &gt; cpu family      : 15
&gt; &gt; model           : 65
&gt; &gt; model name      : Dual-Core AMD Opteron(tm) Processor 2218
&gt; &gt; stepping        : 2
&gt; &gt; cpu MHz         : 2600.209
&gt; &gt; cache size      : 1024 KB

&gt; &gt; uname -a:
&gt; &gt; Linux blade288 2.6.5-7.244-smp #1 SMP Mon Dec 12 18:32:25 UTC 2005
&gt; &gt; x86_64 x86_64 x86_64 GNU/Linux

&gt; Which linux distribution is it?  Try

&gt;   cat /etc/issue

&gt; It's probably SUSE, since that is listed in the gcc output below.

&gt; Also, regarding polymake, maybe you should report what the
&gt; error is when it builds?

&gt; William

&gt; &gt; Jobs are scheduled with something called PBS.

&gt; &gt; Polymake fails to compile, which is bad news for me - although I
&gt; &gt; haven't tried to install polymake on a fresh 2.8.4 install so it might
&gt; &gt; be a more pervasive problem.

&gt; &gt; One problem is that it looks like an older gcc, is this a problem(?):
&gt; &gt; ****************************************************
&gt; &gt; GCC Version
&gt; &gt; gcc -v
&gt; &gt; Reading specs from /usr/lib64/gcc-lib/x86_64-suse-linux/3.3.3/specs
&gt; &gt; Configured with: ../configure --enable-threads=posix --prefix=/usr --
&gt; &gt; with-local-prefix=/usr/local --
&gt; &gt; infodir=/usr/share/info --mandir=/usr/share/man --enable-languages=c,c+
&gt; &gt; +,f77,objc,java,ada --disable
&gt; &gt; -checking --libdir=/usr/lib64 --enable-libgcj --with-gxx-include-dir=/
&gt; &gt; usr/include/g++ --with-slibdir
&gt; &gt; =/lib64 --with-system-zlib --enable-shared --enable-__cxa_atexit
&gt; &gt; x86_64-suse-linux
&gt; &gt; Thread model: posix
&gt; &gt; gcc version 3.3.3 (SuSE Linux)
&gt; &gt; ****************************************************

&gt; &gt; It would be very cool if I could use this machine for polytope/
&gt; &gt; algebraic geometry/groebner basis stuff.  At the moment I am using it
&gt; &gt; for pretty routine bioinformatics stuff that I can do without sage if
&gt; &gt; necessary.

&gt; &gt; -Marshall

&gt; --
&gt; William Stein
&gt; Associate Professor of Mathematics
&gt; University of Washington http://www.williamstein.org
">
</POST>
<POST>
<POSTER> mabshoff &lt;Michael.Absh...@fsmath.mathematik.uni-dortmund.de&gt; </POSTER>
<POSTDATE> 2007-09-11T00:10:00 </POSTDATE>
On Sep 10, 8:36 pm, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

<QUOTE PREVIOUSPOST="
&gt; cat /etc/issue gives:
">

Hello Marshall,

<QUOTE PREVIOUSPOST="
&gt; Welcome to SUSE LINUX Enterprise Server 9 (x86_64) - Kernel \r (\l).

&gt; The tail end of the polymake build, when it crashes, has the
&gt; following:

&gt; make[2]: Leaving directory `/home/bc1/hamptonm/sage-2.8.3.6/spkg/build/
&gt; polymake-2.2.p2/build/modules/graph'
&gt; g++   -I/home/bc1/hamptonm/sage-2.8.3.6/local/lib  -I/home/bc1/
&gt; hamptonm/sage-2.8.3.6/local/lib  -o cayley_embedding
&gt; cayley_embedding.o libpolytope.a ../../lib/libpoly.a  -lgmp
&gt; collect2: ld terminated with signal 11 [Segmentation fault]
">

Okay, this is not a gcc issue (at least the output makes it very
unlikely), but that the linker shoots itself. Check with the sysadmin
if there is a more current ld somewhere in the systems, otherwise
compile your own binutils locally and make sure that they are in $PATH
before the systems ld. Try again with that ld and let us know if the
problem goes away. You should also make sure the polymake doesn't hard
code the path to ld somewhere in the makefile in case the error
doesn't go away with the new binutils.

<QUOTE PREVIOUSPOST="
&gt; make[2]: *** [cayley_embedding] Error 1
&gt; make[1]: *** [do_all] Error 2
&gt; make[1]: Leaving directory `/home/bc1/hamptonm/sage-2.8.3.6/spkg/build/
&gt; polymake-2.2.p2/build/apps/polytope'
&gt; make: *** [all] Error 2
&gt; cp: cannot create regular file `/home/bc1/hamptonm/sage-2.8.3.6/local/
&gt; polymake/bin/polymake': No such file or directory
&gt; Do not worry if there is an error message above, as long as the build
&gt; says it worked below.
&gt; Error building and installing polymake

&gt; real    6m1.033s
&gt; user    5m19.608s
&gt; sys     0m31.232s
">

Cheers,

Michael
</POST>
<POST>
<POSTER> Hamptonio &lt;hampto...@gmail.com&gt; </POSTER>
<POSTDATE> 2007-09-11T08:07:00 </POSTDATE>
Oops, I am in the middle of giving the gcc-4.2.1 package a try.  I
hope I am using it correctly - I installed it, and then removed
everything from spkg/installed, and now I am recompiliing by using
&quot;make&quot;.  Will that rebuild with gcc-4.2.1? It looks like it from what
I can see during compilation.

If this doesn't help at all, I will try your suggestion of a local
binutils.

Thanks for the help,
Marshall

On Sep 10, 11:10 pm, mabshoff &lt;Michael.Absh ... @fsmath.mathematik.uni-

<QUOTE PREVIOUSPOST="
dortmund.de&gt; wrote:
&gt; On Sep 10, 8:36 pm, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

&gt; &gt; cat /etc/issue gives:

&gt; Hello Marshall,

&gt; &gt; Welcome to SUSE LINUX Enterprise Server 9 (x86_64) - Kernel \r (\l).

&gt; &gt; The tail end of the polymake build, when it crashes, has the
&gt; &gt; following:

&gt; &gt; make[2]: Leaving directory `/home/bc1/hamptonm/sage-2.8.3.6/spkg/build/
&gt; &gt; polymake-2.2.p2/build/modules/graph'
&gt; &gt; g++   -I/home/bc1/hamptonm/sage-2.8.3.6/local/lib  -I/home/bc1/
&gt; &gt; hamptonm/sage-2.8.3.6/local/lib  -o cayley_embedding
&gt; &gt; cayley_embedding.o libpolytope.a ../../lib/libpoly.a  -lgmp
&gt; &gt; collect2: ld terminated with signal 11 [Segmentation fault]

&gt; Okay, this is not a gcc issue (at least the output makes it very
&gt; unlikely), but that the linker shoots itself. Check with the sysadmin
&gt; if there is a more current ld somewhere in the systems, otherwise
&gt; compile your own binutils locally and make sure that they are in $PATH
&gt; before the systems ld. Try again with that ld and let us know if the
&gt; problem goes away. You should also make sure the polymake doesn't hard
&gt; code the path to ld somewhere in the makefile in case the error
&gt; doesn't go away with the new binutils.

&gt; &gt; make[2]: *** [cayley_embedding] Error 1
&gt; &gt; make[1]: *** [do_all] Error 2
&gt; &gt; make[1]: Leaving directory `/home/bc1/hamptonm/sage-2.8.3.6/spkg/build/
&gt; &gt; polymake-2.2.p2/build/apps/polytope'
&gt; &gt; make: *** [all] Error 2
&gt; &gt; cp: cannot create regular file `/home/bc1/hamptonm/sage-2.8.3.6/local/
&gt; &gt; polymake/bin/polymake': No such file or directory
&gt; &gt; Do not worry if there is an error message above, as long as the build
&gt; &gt; says it worked below.
&gt; &gt; Error building and installing polymake

&gt; &gt; real    6m1.033s
&gt; &gt; user    5m19.608s
&gt; &gt; sys     0m31.232s

&gt; Cheers,

&gt; Michael
">
</POST>
<POST>
<POSTER> mabshoff &lt;Michael.Absh...@fsmath.mathematik.uni-dortmund.de&gt; </POSTER>
<POSTDATE> 2007-09-11T09:09:00 </POSTDATE>
On Sep 11, 2:07 pm, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:

<QUOTE PREVIOUSPOST="
&gt; Oops, I am in the middle of giving the gcc-4.2.1 package a try.  I
&gt; hope I am using it correctly - I installed it, and then removed
&gt; everything from spkg/installed, and now I am recompiliing by using
&gt; &quot;make&quot;.  Will that rebuild with gcc-4.2.1? It looks like it from what
&gt; I can see during compilation.
">

Yep. Assuming you have source sage-env 'which g++' should point to the
one in local/bin. But it might be needed to modify local/bin/sage-env
slightly and include lib64 in LD_LIBRARY_PATH like the following

LD_LIBRARY_PATH=&quot;$SAGE_ROOT/local/lib/64:$SAGE_ROOT/local/lib/:
$LD_LIBRARY_PATH&quot; &amp;&amp; export LD_LIBRARY_PATH

to pick up the new libstdc++.so before the system's one. The problem
is due to Linux on Opterons having a 32 and 64 bit userspace and gcc
installing the 64 bit libraries into lib64.

<QUOTE PREVIOUSPOST="
&gt; If this doesn't help at all, I will try your suggestion of a local
&gt; binutils.
">

Well, that certainly is somewhat of a last resort, but if the box has
gcc 3.3 the binutils ought to be also fairly ancient.

<QUOTE PREVIOUSPOST="
&gt; Thanks for the help,
&gt; Marshall
">

&lt;SNIP&gt;

Cheers,

Michael
</POST>
<POST>
<POSTER> mabshoff &lt;Michael.Absh...@fsmath.mathematik.uni-dortmund.de&gt; </POSTER>
<POSTDATE> 2007-09-11T09:12:00 </POSTDATE>
On Sep 11, 3:09 pm, mabshoff &lt;Michael.Absh ... @fsmath.mathematik.uni-

<QUOTE PREVIOUSPOST="
dortmund.de&gt; wrote:
&gt; On Sep 11, 2:07 pm, Hamptonio &lt;hampto ... @gmail.com&gt; wrote:
">

Sorry, but this is slightly wrong but causes bad consequences:

<QUOTE PREVIOUSPOST="
&gt; LD_LIBRARY_PATH=&quot;$SAGE_ROOT/local/lib/64:$SAGE_ROOT/local/lib/:
&gt; $LD_LIBRARY_PATH&quot; &amp;&amp; export LD_LIBRARY_PATH
">

It needs to be:

LD_LIBRARY_PATH=&quot;$SAGE_ROOT/local/lib64:$SAGE_ROOT/local/lib/:
$LD_LIBRARY_PATH&quot; &amp;&amp; export LD_LIBRARY_PATH

<QUOTE PREVIOUSPOST="
&gt; to pick up the new libstdc++.so before the system's one. The problem
&gt; is due to Linux on Opterons having a 32 and 64 bit userspace and gcc
&gt; installing the 64 bit libraries into lib64.
">

Sorry for the noise.

Cheers,

Michael
</POST>
</TEXT>
</BODY>
</DOC>
