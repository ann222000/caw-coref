<DOC>
<DOCID> eng-NG-31-135454-9736835 </DOCID>
<DOCTYPE SOURCE="usenet"> USENET TEXT </DOCTYPE>
<DATETIME> 2007-09-18T12:08:00 </DATETIME>
<BODY>
<HEADLINE>
using Yast2 via command line to add users
</HEADLINE>
<TEXT>
<POST>
<POSTER> cgr...@memhosp.com </POSTER>
<POSTDATE> 2007-09-18T12:08:00 </POSTDATE>
I have a SuSE version 8.2 server using local authentication that I am
going to migrate to a new 10.2 version server using ldap
authentication. I have well over 300 samba users and nearly 200 groups
that I need to migrate to this new machine. I would like to be able to
script the user and group adds. The ldap server is a SLES 9 server. I
normally use the YAST2 gui to add users and groups and this also
updates the samba schema. I have tried to use yast2 via the command
line but it complains of my syntax even though I have tried as many
variations as I can think of based on the help produced from:
/sbin/yast2 users longhelp

Here is a typical attempt:
/sbin/yast2 users add verbose username &quot;curt&quot; cn &quot;Curtis Grote&quot;
password &quot;passwd&quot; no_home shell &quot;/bin/false&quot; gid &quot;1026&quot; groups &quot;1032&quot;
type &quot;ldap&quot;

The error is &quot;unknown option for command add: /sbin/false&quot;. No matter
what I remove none of the options seem to work.

Has anyone successfully used yast2 in the batch mode to add users to
an ldap server supporting the samba schema? Does anyone have a better
idea as to how I can add users and groups in a batch mode while
ensuring the samba schema is also updated?

Any help is greatly appreciated.

Curtis Grote
Memorial Hospital
</POST>
<POST>
<POSTER> &quot;Andrew Madsen&quot; &lt;andrew.mad...@harley-davidson.com&gt; </POSTER>
<POSTDATE> 2007-09-18T12:57:00 </POSTDATE>
You need equal signs &quot;=&quot; between the options.
/sbin/yast2 users add verbose username=&quot;curt&quot; cn=&quot;Curtis Grote&quot;
password=&quot;passwd&quot; no_home shell=&quot;/bin/false&quot; gid=&quot;1026&quot; groups=&quot;1032&quot;
type=&quot;ldap&quot;

<QUOTE PREVIOUSPOST="
&lt;cgr ... @memhosp.com&gt; wrote in message
">

news:1190131702.911378.288290@22g2000hsm.googlegroups.com ...

<QUOTE PREVIOUSPOST="
&gt;I have a SuSE version 8.2 server using local authentication that I am
&gt; going to migrate to a new 10.2 version server using ldap
&gt; authentication. I have well over 300 samba users and nearly 200 groups
&gt; that I need to migrate to this new machine. I would like to be able to
&gt; script the user and group adds. The ldap server is a SLES 9 server. I
&gt; normally use the YAST2 gui to add users and groups and this also
&gt; updates the samba schema. I have tried to use yast2 via the command
&gt; line but it complains of my syntax even though I have tried as many
&gt; variations as I can think of based on the help produced from:
&gt; /sbin/yast2 users longhelp

&gt; Here is a typical attempt:
&gt; /sbin/yast2 users add verbose username &quot;curt&quot; cn &quot;Curtis Grote&quot;
&gt; password &quot;passwd&quot; no_home shell &quot;/bin/false&quot; gid &quot;1026&quot; groups &quot;1032&quot;
&gt; type &quot;ldap&quot;

&gt; The error is &quot;unknown option for command add: /sbin/false&quot;. No matter
&gt; what I remove none of the options seem to work.

&gt; Has anyone successfully used yast2 in the batch mode to add users to
&gt; an ldap server supporting the samba schema? Does anyone have a better
&gt; idea as to how I can add users and groups in a batch mode while
&gt; ensuring the samba schema is also updated?

&gt; Any help is greatly appreciated.

&gt; Curtis Grote
&gt; Memorial Hospital
">
</POST>
<POST>
<POSTER> &quot;Andrew Madsen&quot; &lt;andrew.mad...@harley-davidson.com&gt; </POSTER>
<POSTDATE> 2007-09-18T13:09:00 </POSTDATE>
OK a better way it should have been said: You need equal signs '=' between
the options and their values.

<QUOTE PREVIOUSPOST="
&quot;Andrew Madsen&quot; &lt;andrew.mad ... @harley-davidson.com&gt; wrote in message
">

news:IrTHi.107073$ax1.70694@bgtnsc05-news.ops.worldnet.att.net ...

<QUOTE PREVIOUSPOST="
&gt; You need equal signs &quot;=&quot; between the options.
&gt; /sbin/yast2 users add verbose username=&quot;curt&quot; cn=&quot;Curtis Grote&quot;
&gt; password=&quot;passwd&quot; no_home shell=&quot;/bin/false&quot; gid=&quot;1026&quot; groups=&quot;1032&quot;
&gt; type=&quot;ldap&quot;

&gt; &lt;cgr ... @memhosp.com&gt; wrote in message
&gt; news:1190131702.911378.288290@22g2000hsm.googlegroups.com ...
&gt;&gt;I have a SuSE version 8.2 server using local authentication that I am
&gt;&gt; going to migrate to a new 10.2 version server using ldap
&gt;&gt; authentication. I have well over 300 samba users and nearly 200 groups
&gt;&gt; that I need to migrate to this new machine. I would like to be able to
&gt;&gt; script the user and group adds. The ldap server is a SLES 9 server. I
&gt;&gt; normally use the YAST2 gui to add users and groups and this also
&gt;&gt; updates the samba schema. I have tried to use yast2 via the command
&gt;&gt; line but it complains of my syntax even though I have tried as many
&gt;&gt; variations as I can think of based on the help produced from:
&gt;&gt; /sbin/yast2 users longhelp

&gt;&gt; Here is a typical attempt:
&gt;&gt; /sbin/yast2 users add verbose username &quot;curt&quot; cn &quot;Curtis Grote&quot;
&gt;&gt; password &quot;passwd&quot; no_home shell &quot;/bin/false&quot; gid &quot;1026&quot; groups &quot;1032&quot;
&gt;&gt; type &quot;ldap&quot;

&gt;&gt; The error is &quot;unknown option for command add: /sbin/false&quot;. No matter
&gt;&gt; what I remove none of the options seem to work.

&gt;&gt; Has anyone successfully used yast2 in the batch mode to add users to
&gt;&gt; an ldap server supporting the samba schema? Does anyone have a better
&gt;&gt; idea as to how I can add users and groups in a batch mode while
&gt;&gt; ensuring the samba schema is also updated?

&gt;&gt; Any help is greatly appreciated.

&gt;&gt; Curtis Grote
&gt;&gt; Memorial Hospital
">
</POST>
<POST>
<POSTER> cgr...@memhosp.com </POSTER>
<POSTDATE> 2007-09-18T16:18:00 </POSTDATE>
On Sep 18, 12:09 pm, &quot;Andrew Madsen&quot; &lt;andrew.mad...@harley-

<QUOTE PREVIOUSPOST="
davidson.com&gt; wrote:
&gt; OK a better way it should have been said: You need equal signs '=' between
&gt; the options and their values.&quot;Andrew Madsen&quot; &lt;andrew.mad ... @harley-davidson.com&gt; wrote in message

&gt; news:IrTHi.107073$ax1.70694@bgtnsc05-news.ops.worldnet.att.net ...

&gt; &gt; You need equal signs &quot;=&quot; between the options.
&gt; &gt; /sbin/yast2 users add verbose username=&quot;curt&quot; cn=&quot;Curtis Grote&quot;
&gt; &gt; password=&quot;passwd&quot; no_home shell=&quot;/bin/false&quot; gid=&quot;1026&quot; groups=&quot;1032&quot;
&gt; &gt; type=&quot;ldap&quot;
">

Thank you very much for the reply. That has gotten me one step
farther. Still getting errors, but at least they are different errors.

Curtis Grote
Memorial Hospital
</POST>
<POST>
<POSTER> &quot;Andrew Madsen&quot; &lt;andrew.mad...@harley-davidson.com&gt; </POSTER>
<POSTDATE> 2007-09-18T16:44:00 </POSTDATE>
What other errors are you getting?

<QUOTE PREVIOUSPOST="
&lt;cgr ... @memhosp.com&gt; wrote in message
">

news:1190146695.375237.159000@50g2000hsm.googlegroups.com ...

<QUOTE PREVIOUSPOST="
&gt; On Sep 18, 12:09 pm, &quot;Andrew Madsen&quot; &lt;andrew.mad...@harley-
&gt; davidson.com&gt; wrote:
&gt;&gt; OK a better way it should have been said: You need equal signs '='
&gt;&gt; between
&gt;&gt; the options and their values.&quot;Andrew Madsen&quot;
&gt;&gt; &lt;andrew.mad ... @harley-davidson.com&gt; wrote in message

&gt;&gt; news:IrTHi.107073$ax1.70694@bgtnsc05-news.ops.worldnet.att.net ...

&gt;&gt; &gt; You need equal signs &quot;=&quot; between the options.
&gt;&gt; &gt; /sbin/yast2 users add verbose username=&quot;curt&quot; cn=&quot;Curtis Grote&quot;
&gt;&gt; &gt; password=&quot;passwd&quot; no_home shell=&quot;/bin/false&quot; gid=&quot;1026&quot; groups=&quot;1032&quot;
&gt;&gt; &gt; type=&quot;ldap&quot;

&gt; Thank you very much for the reply. That has gotten me one step
&gt; farther. Still getting errors, but at least they are different errors.

&gt; Curtis Grote
&gt; Memorial Hospital
">
</POST>
<POST>
<POSTER> cgr...@memhosp.com </POSTER>
<POSTDATE> 2007-09-19T14:39:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
Andrew Madsen wrote:
&gt; What other errors are you getting?
">

Andrew,

Thanks again for replying to my post. Here are what I think are the
important lines from /var/log/YaST2/y2log after running the following
command (as root):
/sbin/yast2 users add verbose username=&quot;curt&quot; cn=&quot;Curtis Grote&quot;
password=&quot;istech&quot; no_home shell=&quot;/bin/false&quot; gid=&quot;1026&quot; groups=&quot;1032&quot;
type=&quot;ldap&quot;

2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] clients/users.ycp:10
----------------------------------------
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] clients/users.ycp:11 Users
module started
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
option add
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
option verbose
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
option username=curt
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
option cn=Curtis Grote
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
option password=istech
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
option no_home
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
option shell=/bin/false
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
option gid=1026
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
option groups=1032
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
option type=ldap
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
213 .product.features.USE_DESKTOP_SCHEDULER: 'yes'
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
213 .product.features.IO_SCHEDULER: 'as'
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
213 .product.features.ENABLE_AUTOLOGIN: 'yes'
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
213 .product.features.EVMS_CONFIG: 'no'
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
213 .product.features.FORCE_STATIC_IP: 'no'
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] clients/users.ycp:56 Starting
with arguments: [&quot;add&quot;, &quot;verbose&quot;, &quot;username=curt&quot;, &quot;cn=Curtis Grote&quot;,
&quot;password=iste
ch&quot;, &quot;no_home&quot;, &quot;shell=/bin/false&quot;, &quot;gid=1026&quot;, &quot;groups=1032&quot;,
&quot;type=ldap&quot;]
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] CommandLine.ycp:836
----------------------------------------
2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] CommandLine.ycp:837 Command
line interface started
Initializing
2007-09-19 11:48:41 &lt;1&gt; ldap(6367) [wfm] Y2WFMComponent.cc(import):579
Y2WFMComponent::import (Report)
2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [wfm] Y2WFMComponent.cc(import):579
Y2WFMComponent::import (UsersUI)
. . . several lines omitted . . .
2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [wfm] Y2WFMComponent.cc(import):579
Y2WFMComponent::import (Directory)
2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [Perl] modules/
UsersPlugins.pm(UsersPlugins::Read):49 Available plugin:
UsersPluginSamba
2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [Perl] modules/
UsersPlugins.pm(UsersPlugins::Read):49 Available plugin:
UsersPluginSambaGroups
2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [Perl] modules/
UsersPlugins.pm(UsersPlugins::Read):49 Available plugin:
UsersPluginLDAPAll
Ready
Quitting (without changes)
2007-09-19 11:48:44 &lt;1&gt; ldap(6367) [YCP] CommandLine.ycp:943
Commandline interface finished
2007-09-19 11:48:44 &lt;1&gt; ldap(6367) [YCP] CommandLine.ycp:944
----------------------------------------
2007-09-19 11:48:44 &lt;1&gt; ldap(6367) [YCP] clients/users.ycp:458 Users
module finished with false

It successfully recognizes that I want to enter the 'users' mode, but
for some reason does not recognize 'add' as a valid command. Hence
everything else fails. One of the aggravating parts of this is that I
can see in the log that the Samba plugins are being loaded, indicating
that if this would work the Samba schema parts would indeed also be
updated. If I perform a &quot;/sbin/yast2 users list ldap&quot; it successfully
recognizes 'list' as a command and prints the ldap users.

I performed an &quot;Online Update&quot; this morning on the SLES 9 server to
make sure all updates were applied. Any ideas are appreciated.

Curtis Grote
Memorial Hospital
</POST>
<POST>
<POSTER> &quot;Andrew Madsen&quot; &lt;andrew.mad...@harley-davidson.com&gt; </POSTER>
<POSTDATE> 2007-09-19T15:57:00 </POSTDATE>
You mentioned earlier that you were scripting the process. Is the command
you ran coming from that script or was it direct input from the command
line? A thing to try is to copy the y2log to bkpy2log and delete the y2log
(or move it to some other file) then run the command from the command line
and see if it works. I just ran the command from the command line and it
worked just fine. Well I failed on the ldap value because I do not have the
LDAP module running.

If it works from direct input I would suspect that your script is not
handing off the values correctly.

<QUOTE PREVIOUSPOST="
&lt;cgr ... @memhosp.com&gt; wrote in message
">

news:1190227181.774884.82760@o80g2000hse.googlegroups.com ...

<QUOTE PREVIOUSPOST="
&gt; Andrew Madsen wrote:
&gt;&gt; What other errors are you getting?

&gt; Andrew,

&gt; Thanks again for replying to my post. Here are what I think are the
&gt; important lines from /var/log/YaST2/y2log after running the following
&gt; command (as root):
&gt; /sbin/yast2 users add verbose username=&quot;curt&quot; cn=&quot;Curtis Grote&quot;
&gt; password=&quot;istech&quot; no_home shell=&quot;/bin/false&quot; gid=&quot;1026&quot; groups=&quot;1032&quot;
&gt; type=&quot;ldap&quot;

&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] clients/users.ycp:10
&gt; ----------------------------------------
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] clients/users.ycp:11 Users
&gt; module started
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt; option add
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt; option verbose
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt; option username=curt
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt; option cn=Curtis Grote
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt; option password=istech
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt; option no_home
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt; option shell=/bin/false
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt; option gid=1026
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt; option groups=1032
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt; option type=ldap
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
&gt; 213 .product.features.USE_DESKTOP_SCHEDULER: 'yes'
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
&gt; 213 .product.features.IO_SCHEDULER: 'as'
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
&gt; 213 .product.features.ENABLE_AUTOLOGIN: 'yes'
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
&gt; 213 .product.features.EVMS_CONFIG: 'no'
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
&gt; 213 .product.features.FORCE_STATIC_IP: 'no'
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] clients/users.ycp:56 Starting
&gt; with arguments: [&quot;add&quot;, &quot;verbose&quot;, &quot;username=curt&quot;, &quot;cn=Curtis Grote&quot;,
&gt; &quot;password=iste
&gt; ch&quot;, &quot;no_home&quot;, &quot;shell=/bin/false&quot;, &quot;gid=1026&quot;, &quot;groups=1032&quot;,
&gt; &quot;type=ldap&quot;]
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] CommandLine.ycp:836
&gt; ----------------------------------------
&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] CommandLine.ycp:837 Command
&gt; line interface started
&gt; Initializing
&gt; 2007-09-19 11:48:41 &lt;1&gt; ldap(6367) [wfm] Y2WFMComponent.cc(import):579
&gt; Y2WFMComponent::import (Report)
&gt; 2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [wfm] Y2WFMComponent.cc(import):579
&gt; Y2WFMComponent::import (UsersUI)
&gt; . . . several lines omitted . . .
&gt; 2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [wfm] Y2WFMComponent.cc(import):579
&gt; Y2WFMComponent::import (Directory)
&gt; 2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [Perl] modules/
&gt; UsersPlugins.pm(UsersPlugins::Read):49 Available plugin:
&gt; UsersPluginSamba
&gt; 2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [Perl] modules/
&gt; UsersPlugins.pm(UsersPlugins::Read):49 Available plugin:
&gt; UsersPluginSambaGroups
&gt; 2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [Perl] modules/
&gt; UsersPlugins.pm(UsersPlugins::Read):49 Available plugin:
&gt; UsersPluginLDAPAll
&gt; Ready
&gt; Quitting (without changes)
&gt; 2007-09-19 11:48:44 &lt;1&gt; ldap(6367) [YCP] CommandLine.ycp:943
&gt; Commandline interface finished
&gt; 2007-09-19 11:48:44 &lt;1&gt; ldap(6367) [YCP] CommandLine.ycp:944
&gt; ----------------------------------------
&gt; 2007-09-19 11:48:44 &lt;1&gt; ldap(6367) [YCP] clients/users.ycp:458 Users
&gt; module finished with false

&gt; It successfully recognizes that I want to enter the 'users' mode, but
&gt; for some reason does not recognize 'add' as a valid command. Hence
&gt; everything else fails. One of the aggravating parts of this is that I
&gt; can see in the log that the Samba plugins are being loaded, indicating
&gt; that if this would work the Samba schema parts would indeed also be
&gt; updated. If I perform a &quot;/sbin/yast2 users list ldap&quot; it successfully
&gt; recognizes 'list' as a command and prints the ldap users.

&gt; I performed an &quot;Online Update&quot; this morning on the SLES 9 server to
&gt; make sure all updates were applied. Any ideas are appreciated.

&gt; Curtis Grote
&gt; Memorial Hospital
">
</POST>
<POST>
<POSTER> &quot;Andrew Madsen&quot; &lt;andrew.mad...@harley-davidson.com&gt; </POSTER>
<POSTDATE> 2007-09-19T16:13:00 </POSTDATE>
Damn! I have to quit doing four things at once. The reson for the rename is
so a new log gets created with just the output of the command. That way it
cuts it down to a couple of hundred lines instead of thousands. If need be
you could post the smaller log.

<QUOTE PREVIOUSPOST="
&quot;Andrew Madsen&quot; &lt;andrew.mad ... @harley-davidson.com&gt; wrote in message
">

news:8bfIi.572238$p47.261795@bgtnsc04-news.ops.worldnet.att.net ...

<QUOTE PREVIOUSPOST="
&gt; You mentioned earlier that you were scripting the process. Is the command
&gt; you ran coming from that script or was it direct input from the command
&gt; line? A thing to try is to copy the y2log to bkpy2log and delete the y2log
&gt; (or move it to some other file) then run the command from the command line
&gt; and see if it works. I just ran the command from the command line and it
&gt; worked just fine. Well I failed on the ldap value because I do not have
&gt; the LDAP module running.

&gt; If it works from direct input I would suspect that your script is not
&gt; handing off the values correctly.
&gt; &lt;cgr ... @memhosp.com&gt; wrote in message
&gt; news:1190227181.774884.82760@o80g2000hse.googlegroups.com ...

&gt;&gt; Andrew Madsen wrote:
&gt;&gt;&gt; What other errors are you getting?

&gt;&gt; Andrew,

&gt;&gt; Thanks again for replying to my post. Here are what I think are the
&gt;&gt; important lines from /var/log/YaST2/y2log after running the following
&gt;&gt; command (as root):
&gt;&gt; /sbin/yast2 users add verbose username=&quot;curt&quot; cn=&quot;Curtis Grote&quot;
&gt;&gt; password=&quot;istech&quot; no_home shell=&quot;/bin/false&quot; gid=&quot;1026&quot; groups=&quot;1032&quot;
&gt;&gt; type=&quot;ldap&quot;

&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] clients/users.ycp:10
&gt;&gt; ----------------------------------------
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] clients/users.ycp:11 Users
&gt;&gt; module started
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt;&gt; option add
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt;&gt; option verbose
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt;&gt; option username=curt
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt;&gt; option cn=Curtis Grote
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt;&gt; option password=istech
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt;&gt; option no_home
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt;&gt; option shell=/bin/false
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt;&gt; option gid=1026
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt;&gt; option groups=1032
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Mode.ycp:325 skipping unknown
&gt;&gt; option type=ldap
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
&gt;&gt; 213 .product.features.USE_DESKTOP_SCHEDULER: 'yes'
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
&gt;&gt; 213 .product.features.IO_SCHEDULER: 'as'
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
&gt;&gt; 213 .product.features.ENABLE_AUTOLOGIN: 'yes'
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
&gt;&gt; 213 .product.features.EVMS_CONFIG: 'no'
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] Misc.ycp:
&gt;&gt; 213 .product.features.FORCE_STATIC_IP: 'no'
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] clients/users.ycp:56 Starting
&gt;&gt; with arguments: [&quot;add&quot;, &quot;verbose&quot;, &quot;username=curt&quot;, &quot;cn=Curtis Grote&quot;,
&gt;&gt; &quot;password=iste
&gt;&gt; ch&quot;, &quot;no_home&quot;, &quot;shell=/bin/false&quot;, &quot;gid=1026&quot;, &quot;groups=1032&quot;,
&gt;&gt; &quot;type=ldap&quot;]
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] CommandLine.ycp:836
&gt;&gt; ----------------------------------------
&gt;&gt; 2007-09-19 11:48:40 &lt;1&gt; ldap(6367) [YCP] CommandLine.ycp:837 Command
&gt;&gt; line interface started
&gt;&gt; Initializing
&gt;&gt; 2007-09-19 11:48:41 &lt;1&gt; ldap(6367) [wfm] Y2WFMComponent.cc(import):579
&gt;&gt; Y2WFMComponent::import (Report)
&gt;&gt; 2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [wfm] Y2WFMComponent.cc(import):579
&gt;&gt; Y2WFMComponent::import (UsersUI)
&gt;&gt; . . . several lines omitted . . .
&gt;&gt; 2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [wfm] Y2WFMComponent.cc(import):579
&gt;&gt; Y2WFMComponent::import (Directory)
&gt;&gt; 2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [Perl] modules/
&gt;&gt; UsersPlugins.pm(UsersPlugins::Read):49 Available plugin:
&gt;&gt; UsersPluginSamba
&gt;&gt; 2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [Perl] modules/
&gt;&gt; UsersPlugins.pm(UsersPlugins::Read):49 Available plugin:
&gt;&gt; UsersPluginSambaGroups
&gt;&gt; 2007-09-19 11:48:43 &lt;1&gt; ldap(6367) [Perl] modules/
&gt;&gt; UsersPlugins.pm(UsersPlugins::Read):49 Available plugin:
&gt;&gt; UsersPluginLDAPAll
&gt;&gt; Ready
&gt;&gt; Quitting (without changes)
&gt;&gt; 2007-09-19 11:48:44 &lt;1&gt; ldap(6367) [YCP] CommandLine.ycp:943
&gt;&gt; Commandline interface finished
&gt;&gt; 2007-09-19 11:48:44 &lt;1&gt; ldap(6367) [YCP] CommandLine.ycp:944
&gt;&gt; ----------------------------------------
&gt;&gt; 2007-09-19 11:48:44 &lt;1&gt; ldap(6367) [YCP] clients/users.ycp:458 Users
&gt;&gt; module finished with false

&gt;&gt; It successfully recognizes that I want to enter the 'users' mode, but
&gt;&gt; for some reason does not recognize 'add' as a valid command. Hence
&gt;&gt; everything else fails. One of the aggravating parts of this is that I
&gt;&gt; can see in the log that the Samba plugins are being loaded, indicating
&gt;&gt; that if this would work the Samba schema parts would indeed also be
&gt;&gt; updated. If I perform a &quot;/sbin/yast2 users list ldap&quot; it successfully
&gt;&gt; recognizes 'list' as a command and prints the ldap users.

&gt;&gt; I performed an &quot;Online Update&quot; this morning on the SLES 9 server to
&gt;&gt; make sure all updates were applied. Any ideas are appreciated.

&gt;&gt; Curtis Grote
&gt;&gt; Memorial Hospital
">
</POST>
<POST>
<POSTER> cgr...@memhosp.com </POSTER>
<POSTDATE> 2007-09-20T11:34:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
Andrew Madsen wrote:
&gt; &gt; You mentioned earlier that you were scripting the process. Is the command
&gt; &gt; you ran coming from that script or was it direct input from the command
&gt; &gt; line? A thing to try is to copy the y2log to bkpy2log and delete the y2log
&gt; &gt; (or move it to some other file) then run the command from the command line
&gt; &gt; and see if it works. I just ran the command from the command line and it
&gt; &gt; worked just fine. Well I failed on the ldap value because I do not have
&gt; &gt; the LDAP module running.
">

Andrew,

Thanks again for replying to my post. Yesterday I tried the &quot;/sbin/
yast2 users longhelp&quot; from a 10.2 machine and noticed an extra
parameter in the 'add' list: 'ldap_password'. I had been wondering how
the user add would be authenticating into ldap and was expecting a
prompt for it. This made me suspect a bug, so this morning I updated
the server from version 9 to version 10 SP1. I first ran the
&quot;longhelp&quot; and noticed that the &quot;ldap_password&quot; parameter was now
documented. I then ran the &quot;users add&quot; command adding the
&quot;ldap_password&quot; and the command finished successfully creating the
user account, and very importantly updating the samba schema
information as well.

Thank you very much for all the help you gave in trying to get this
resolved. On what version of SuSE were you running your commands? If
we ever meet up I owe you a beer!

Curtis Grote
Memorial Hospital

Curtis Grote
Memorial Hospital
</POST>
<POST>
<POSTER> &quot;Andrew Madsen&quot; &lt;andrew.mad...@harley-davidson.com&gt; </POSTER>
<POSTDATE> 2007-09-20T14:37:00 </POSTDATE>
I am running 10 SP1 and I drink RUM!!

<QUOTE PREVIOUSPOST="
&lt;cgr ... @memhosp.com&gt; wrote in message
">

news:1190302482.259636.204930@k79g2000hse.googlegroups.com ...

<QUOTE PREVIOUSPOST="
&gt; Andrew Madsen wrote:
&gt;&gt; &gt; You mentioned earlier that you were scripting the process. Is the
&gt;&gt; &gt; command
&gt;&gt; &gt; you ran coming from that script or was it direct input from the command
&gt;&gt; &gt; line? A thing to try is to copy the y2log to bkpy2log and delete the
&gt;&gt; &gt; y2log
&gt;&gt; &gt; (or move it to some other file) then run the command from the command
&gt;&gt; &gt; line
&gt;&gt; &gt; and see if it works. I just ran the command from the command line and
&gt;&gt; &gt; it
&gt;&gt; &gt; worked just fine. Well I failed on the ldap value because I do not have
&gt;&gt; &gt; the LDAP module running.

&gt; Andrew,

&gt; Thanks again for replying to my post. Yesterday I tried the &quot;/sbin/
&gt; yast2 users longhelp&quot; from a 10.2 machine and noticed an extra
&gt; parameter in the 'add' list: 'ldap_password'. I had been wondering how
&gt; the user add would be authenticating into ldap and was expecting a
&gt; prompt for it. This made me suspect a bug, so this morning I updated
&gt; the server from version 9 to version 10 SP1. I first ran the
&gt; &quot;longhelp&quot; and noticed that the &quot;ldap_password&quot; parameter was now
&gt; documented. I then ran the &quot;users add&quot; command adding the
&gt; &quot;ldap_password&quot; and the command finished successfully creating the
&gt; user account, and very importantly updating the samba schema
&gt; information as well.

&gt; Thank you very much for all the help you gave in trying to get this
&gt; resolved. On what version of SuSE were you running your commands? If
&gt; we ever meet up I owe you a beer!

&gt; Curtis Grote
&gt; Memorial Hospital

&gt; Curtis Grote
&gt; Memorial Hospital
">
</POST>
</TEXT>
</BODY>
</DOC>
