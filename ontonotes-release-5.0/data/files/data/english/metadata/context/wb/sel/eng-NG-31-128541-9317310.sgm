<DOC>
<DOCID> eng-NG-31-128541-9317310 </DOCID>
<DOCTYPE SOURCE="usenet"> USENET TEXT </DOCTYPE>
<DATETIME> 2007-11-29T09:59:00 </DATETIME>
<BODY>
<HEADLINE>
-CURRENT buildkernel failure
</HEADLINE>
<TEXT>
<POST>
<POSTER> Harry Matthiesen Jensen &lt;free...@elgert.dk&gt; </POSTER>
<POSTDATE> 2007-11-29T09:59:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
On Thu, Nov 29, 2007 at 02:01:40PM +0100, Uwe Grohnwaldt wrote:

&gt; #
&gt; ===&gt; zyd (all)
&gt; #
">

I have had same issue.... I just replaced my old customized kernel
configuration with the GENERIC, and started over again..

..everything works like a dream again.

I renamed the GENERIC to my needs, and reconfigured the kernel
configuration file.

--
Mvh/Brgds Harry
FreeBSD 8.0-CURRENT #17: Nov 27 16:26:18 CET 2007 i386
_______________________________________________
freebsd-curr ... @freebsd.org mailing list
http://lists.freebsd.org/mailman/listinfo/freebsd-current
To unsubscribe, send any mail to &quot;freebsd-current-unsubscr ... @freebsd.org&quot;
</POST>
<POST>
<POSTER> Robert Watson &lt;rwat...@FreeBSD.org&gt; </POSTER>
<POSTDATE> 2007-11-29T16:58:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
On Thu, 29 Nov 2007, Harry Matthiesen Jensen wrote:
&gt; On Thu, Nov 29, 2007 at 02:01:40PM +0100, Uwe Grohnwaldt wrote:

&gt;&gt; #
&gt;&gt; ===&gt; zyd (all)
&gt;&gt; #

&gt; I have had same issue.... I just replaced my old customized kernel
&gt; configuration with the GENERIC, and started over again..

&gt; ..everything works like a dream again.

&gt; I renamed the GENERIC to my needs, and reconfigured the kernel configuration
&gt; file.
">

I have to admit that, these days, I almost always create a new file, include
GENERIC, set a new ident, and then just add or trim options and devices as
needed.  While I probably trim a little less from my kernel than I used to, I
find my upgrade path is much smoother since I'm just maintaining my local
variations in their own file.  Typically, I'm just adding a few options and
devices locally, however, and not making large-scale modifications.  I find
the include directive to be invaluable though.

Robert N M Watson
Computer Laboratory
University of Cambridge
_______________________________________________
freebsd-curr ... @freebsd.org mailing list
http://lists.freebsd.org/mailman/listinfo/freebsd-current
To unsubscribe, send any mail to &quot;freebsd-current-unsubscr ... @freebsd.org&quot;
</POST>
<POST>
<POSTER> &quot;Matthew D. Fuller&quot; &lt;fulle...@over-yonder.net&gt; </POSTER>
<POSTDATE> 2007-11-29T17:07:00 </POSTDATE>
On Thu, Nov 29, 2007 at 09:58:15PM +0000 I heard the voice of
Robert Watson, and lo! it spake thus:

<QUOTE PREVIOUSPOST="
&gt; I have to admit that, these days, I almost always create a new file,
&gt; include GENERIC, set a new ident, and then just add or trim options
&gt; and devices as needed.  While I probably trim a little less from my
&gt; kernel than I used to, I find my upgrade path is much smoother since
&gt; I'm just maintaining my local variations in their own file.
">

I fiddled with that a little bit when the include and no* got strong
enough to pull it off, but I found it to be more trouble.  Yanking out
out non-present devices takes a LOT of no* lines, and keeping that up
to date is harder than just dealing with the copy.

What I do do these days, though, is use my choice of the current gen
of distributed VCS's (though it's almost an insultingly simple
use-case  ;) to keep copies of GENERIC in one branch, and derive my
config from that.  So part of my pre-buildkernel process is copying in
the new GENERIC to its branch, and merge that over into MYKERNEL.
That makes keeping up with upstream changes easier, as well as giving
me an easy history of what I've done with my config in the past.

--
Matthew Fuller     (MF4839)   |  fulle ... @over-yonder.net
Systems/Network Administrator | http://www.over-yonder.net/~fullermd/
On the Internet, nobody can hear you scream.
_______________________________________________
freebsd-curr ... @freebsd.org mailing list
http://lists.freebsd.org/mailman/listinfo/freebsd-current
To unsubscribe, send any mail to &quot;freebsd-current-unsubscr ... @freebsd.org&quot;
</POST>
<POST>
<POSTER> Cy Schubert &lt;Cy.Schub...@komquats.com&gt; </POSTER>
<POSTDATE> 2007-11-29T19:41:00 </POSTDATE>
In message &lt;20071129145938.GA5 ... @mugin.localhost&gt;, Harry Matthiesen Jensen
wri
tes:

<QUOTE PREVIOUSPOST="
&gt; On Thu, Nov 29, 2007 at 02:01:40PM +0100, Uwe Grohnwaldt wrote:

&gt; &gt; #
&gt; &gt; ===&gt; zyd (all)
&gt; &gt; #

&gt; I have had same issue.... I just replaced my old customized kernel
&gt; configuration with the GENERIC, and started over again..

&gt; ..everything works like a dream again.

&gt; I renamed the GENERIC to my needs, and reconfigured the kernel
&gt; configuration file.
">

I've come across this in 7.0 (haven't built CURRENT on my testbed yet). A cursory look tells me that it's in ieee80211_scan_sta.c.

I won't have a chance to look at this until tonight or tomorrow.

--
Cheers,
Cy Schubert &lt;Cy.Schub ... @komquats.com&gt;
FreeBSD UNIX:  &lt;c ... @FreeBSD.org&gt;   Web: http://www.FreeBSD.org

e**(i*pi)+1=0

_______________________________________________
freebsd-curr ... @freebsd.org mailing list
http://lists.freebsd.org/mailman/listinfo/freebsd-current
To unsubscribe, send any mail to &quot;freebsd-current-unsubscr ... @freebsd.org&quot;
</POST>
<POST>
<POSTER> Peter Jeremy &lt;peterjer...@optushome.com.au&gt; </POSTER>
<POSTDATE> 2007-11-30T15:55:00 </POSTDATE>
<QUOTE PREVIOUSPOST="
On Thu, Nov 29, 2007 at 04:07:53PM -0600, Matthew D. Fuller wrote:
&gt;What I do do these days, though, is use my choice of the current gen
&gt;of distributed VCS's (though it's almost an insultingly simple
&gt;use-case  ;) to keep copies of GENERIC in one branch, and derive my
&gt;config from that.
">

Since I use bits of NOTES as well as GENERIC, I find it easier to
include the current $FreeBSD lines from GENERIC and both NOTES files
in my local config file.  I then have a shell script that extracts the
$FreeBSD lines from my config file and cvs diffs them against the
current GENERIC/NOTES versions.  I then update my config file with any
new $FreeBSD lines and include or ignore the actual config changes as
appropriate.

Given a list of local config files, the script is basically:
cd /usr/src
while file=shift; do
echo &quot;######### Differences in $file&quot;
awk '$2 == &quot;$FreeBSD:&quot; { print substr($3, 5, length($3) - 6), $4 }' $file |
while read x ver; do
cvs -R diff -u -r$ver $x
done
done

--
Peter Jeremy
Please excuse any delays as the result of my ISP's inability to implement
an MTA that is either RFC2821-compliant or matches their claimed behaviour.

application_pgp-signature_part
1K Download
</POST>
</TEXT>
</BODY>
</DOC>
